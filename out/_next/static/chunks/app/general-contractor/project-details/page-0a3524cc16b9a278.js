(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[557],{45266:function(e,s,t){Promise.resolve().then(t.bind(t,5131))},16463:function(e,s,t){"use strict";var a=t(71169);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},36037:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(57437),l=t(87138),i=t(66648),n=t(2265);function c(){let[e,s]=(0,n.useState)("");return(0,a.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"footer-main",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,a.jsx)(l.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,a.jsx)(i.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,a.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Menu"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/subscription",children:"Free Trial"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/how-it-works",children:"How It Works"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Other"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/faq",children:"FAQs"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,a.jsx)("li",{children:(0,a.jsx)(l.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,a.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)(i.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,a.jsx)(l.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,a.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,a.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,a.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,a.jsx)(l.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}t(62562)},5131:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return m}});var a=t(57437),l=t(2265),i=t(87138),n=t(66648),c=t(16463),r=t(18148),o=t(36037);t(672);let d=e=>decodeURIComponent(e.split("/").pop()||"unknown-file");function m(){var e;let[s,t]=(0,l.useState)(null),[m,h]=(0,l.useState)(null),[u,x]=(0,l.useState)(!0),[g,f]=(0,l.useState)(null),[j,b]=(0,l.useState)(!1),[p,v]=(0,l.useState)(null),N=(0,c.useRouter)(),w=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",t=document.createElement("div");t.innerHTML='\n            <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true" style="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 9999;\n                min-width: 300px;\n                background-color: '.concat("success"===s?"#d4edda":"#f8d7da",";\n                color: ").concat("success"===s?"#155724":"#721c24",";\n                border: 1px solid ").concat("success"===s?"#c3e6cb":"#f5c6cb",';\n                border-radius: 8px;\n                padding: 12px 20px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                font-weight: 500;\n            ">\n                <span>').concat("success"===s?"✅":"❌"," ").concat(e,'</span>\n                <button type="button" class="btn-close" style="font-size: 14px; margin-left: auto;" data-bs-dismiss="toast"></button>\n            </div>\n        '),document.body.appendChild(t);let a=setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},4e3),l=t.querySelector(".btn-close");null==l||l.addEventListener("click",()=>{clearTimeout(a),t.parentNode&&t.parentNode.removeChild(t)})},y=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});(0,l.useEffect)(()=>{t(localStorage.getItem("project-id"))},[]),(0,l.useEffect)(()=>{if(!s){f("Project ID is missing."),x(!1);return}(async()=>{x(!0),f(null);try{var e,t;let a=localStorage.getItem("token");if(!a){f("Authentication required."),x(!1);return}let l=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/projects/").concat(s),{headers:{Authorization:"Bearer ".concat(a),Accept:"application/json"}});if(401===l.status){f("Session expired. Please log in again."),localStorage.removeItem("token"),x(!1);return}let i=await l.json();if(console.log(i),!l.ok)throw Error((null===(t=i.message)||void 0===t?void 0:t[0])||"Failed to load project");if(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.project)h(i.data.project);else throw Error("Invalid response format: missing project data")}catch(e){console.error("Fetch error:",e),f(e.message||"Failed to load project details."),w(e.message||"Failed to load project details.","error")}finally{x(!1)}})()},[s]);let k=(null==m?void 0:m.attachments)?m.attachments.filter(e=>(e.mime_type||"").includes("pdf")||/\.(pdf)$/i.test(e.file)):[],E=(null==m?void 0:m.attachments)?m.attachments.filter(e=>(e.mime_type||"").startsWith("image/")||/\.(jpe?g|png|gif|webp|bmp|svg)$/i.test(e.file)):[];if(u)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec job-single position-static",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("p",{className:"mt-3",children:"Loading project details..."})]})})})}),(0,a.jsx)(o.Z,{})]});if(g||!m)return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec job-single position-static",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"alert alert-danger d-flex align-items-center",role:"alert",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-exclamation-triangle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})}),(0,a.jsx)("div",{children:g||"Project not found."})]}),(0,a.jsx)(i.default,{href:"/general-contractor/my-projects",className:"btn btn-outline-primary",children:"← Back to Projects"})]})})}),(0,a.jsx)(o.Z,{})]});let{bg:D,color:P,label:S}=(e=>{if(!e)return{bg:"#8E8E9310",color:"#8E8E93",label:"Unknown"};let s=e.toLowerCase();return"active"===s?{bg:"#61BA4710",color:"#10BC17",label:"Active"}:"hired"===s?{bg:"#007AFF10",color:"#007AFF",label:"Hired"}:"pending"===s?{bg:"#FF950010",color:"#FF9500",label:"Pending"}:"completed"===s?{bg:"#8E8E9310",color:"#8E8E93",label:"Completed"}:{bg:"#8E8E9310",color:"#8E8E93",label:e.charAt(0).toUpperCase()+e.slice(1)}})(m.status),C=()=>{let e=document.getElementById("attachmentsModal");e&&new window.bootstrap.Modal(e).show()},_=async()=>{if(null==m?void 0:m.id){b(!0),v(null);try{let e=localStorage.getItem("token");if(!e)throw Error("Not authenticated");let s=new FormData;s.append("project_id",m.id.toString()),console.log("➡️ Deleting project:",m.id);let t=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/projects/delete/").concat(m.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e)},body:s});console.log("⬅️ Response status:",t.status);let a=await t.json().catch(()=>null);if(console.log("⬅️ Response body:",a),!t.ok)throw Error((null==a?void 0:a.message)||"Failed to delete project");w("Project deleted successfully!"),N.push("/general-contractor/my-projects")}catch(s){console.error("❌ Delete error:",s);let e=s.message||"Failed to delete project. Please try again.";v(e),w(e,"error")}finally{b(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec job-single position-static",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{style:{backgroundColor:"transparent !important"},className:"topbar",children:(0,a.jsxs)("div",{className:"d-flex align-items-center flex-wrap justify-content-between gap-3",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>N.back(),className:"icon","aria-label":"Go back",style:{background:"none",border:"none",padding:0,cursor:"pointer"},children:(0,a.jsx)(n.default,{src:"/assets/img/button-angle.svg",width:10,height:15,alt:"Back"})}),(0,a.jsx)("div",{className:"login-title fw-semibold fs-4 text-center",children:"Project Details"})]}),(0,a.jsxs)("div",{className:"icon-wrapper d-flex align-items-center gap-3 flex-wrap",children:[(0,a.jsx)("button",{className:"icon",onClick:()=>{localStorage.setItem("project-id","".concat(m.id)),N.push("/general-contractor/edit-project")},children:(0,a.jsx)(n.default,{src:"/assets/img/icons/edit.svg",width:24,height:24,alt:"Edit Icon"})}),(0,a.jsx)("button",{type:"button",className:"icon delete","data-bs-toggle":"modal","data-bs-target":"#deleteProjectModal",style:{backgroundColor:"#DC2626 !important"},children:(0,a.jsx)(n.default,{src:"/assets/img/icons/delete.svg",width:24,height:24,alt:"Delete Icon"})})]})]})}),(0,a.jsx)("div",{className:"row g-4",children:(0,a.jsxs)("div",{className:"col-12",children:[(0,a.jsxs)("div",{className:"custom-card mb-4",children:[(0,a.jsxs)("div",{className:"mb-4 d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[(0,a.jsx)(i.default,{href:"#",className:"btn btn-primary",children:(null===(e=m.category)||void 0===e?void 0:e.name)||"General"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)("div",{className:"date custom-text-gray-light fs-14",children:(e=>{let s=Math.floor((Date.now()-new Date(e).getTime())/864e5);return 0===s?"Today":"".concat(s," day").concat(s>1?"s":""," ago")})(m.created_at)}),(0,a.jsx)("span",{style:{backgroundColor:D,color:P},className:"btn pt-2 pb-2 ps-3 pe-3",children:S})]})]}),(0,a.jsxs)("div",{className:"title text-black fs-5 fw-semibold mb-3",children:[m.city,", ",m.state]}),(0,a.jsx)("div",{className:"mb-4",dangerouslySetInnerHTML:{__html:m.description||""}}),m.state,(0,a.jsx)("div",{className:"title text-black fs-5 fw-semibold mb-3",children:"Project Details"}),(0,a.jsxs)("div",{className:"estimated-wrapper",children:[(0,a.jsxs)("div",{className:"estimated-card",children:[(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)(n.default,{src:"/assets/img/icons/calander.svg",width:24,height:24,alt:"Calendar Icon"})}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("div",{className:"fs-12 mb-1",children:"Estimate Due Date"}),(0,a.jsx)("div",{className:"fs-14 text-black fw-semibold",children:y(m.estimate_due_date)})]})]}),(0,a.jsxs)("div",{className:"estimated-card card-1",children:[(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)(n.default,{src:"/assets/img/icons/calander.svg",width:24,height:24,alt:"Calendar Icon"})}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"fs-12 mb-1",children:"Project Start Date"}),(0,a.jsx)("div",{className:"fs-14 text-black fw-semibold",children:y(m.start_date)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"fs-12 mb-1",children:"Project End Date"}),(0,a.jsx)("div",{className:"fs-14 text-black fw-semibold",children:y(m.end_date)})]})]})]})]})]}),(0,a.jsxs)("div",{className:"custom-card mb-4",children:[(0,a.jsx)("div",{className:"title text-black fs-5 fw-semibold mb-3",children:"Attachments"}),E.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-2 fw-medium",children:"Images"}),(0,a.jsx)("div",{className:"gallery-images mb-3",children:E.map(e=>(0,a.jsx)("div",{onClick:C,style:{cursor:"pointer"},children:(0,a.jsx)(n.default,{src:"".concat(e.file.replace(/^\/+/,"")),width:112,height:112,alt:e.file_name||d(e.file),className:"shadow-sm rounded-2",loading:"lazy",unoptimized:!0})},e.id))})]}),k.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-2 fw-medium",children:"Files"}),(0,a.jsx)("div",{className:"pdf-wrapper mb-3",children:k.map((e,s)=>(0,a.jsxs)("div",{className:"pdf-card mb-2 ".concat(s===k.length-1?"card-1":""),onClick:C,style:{cursor:"pointer"},children:[(0,a.jsx)(n.default,{src:"/assets/img/icons/pdf-img.svg",width:27,height:32,alt:"Pdf Icon"}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("div",{className:"fw-semibold text-black mb-1",children:e.file_name||d(e.file)}),(0,a.jsx)("div",{className:"fs-12",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})})]}),(0,a.jsx)(i.default,{href:"".concat(e.file.replace(/^\/+/,"")),target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(n.default,{src:"/assets/img/icons/download.svg",width:18,height:18,alt:"Download Icon"})}),e.description&&(0,a.jsx)("p",{className:"mb-0",children:e.description})]},e.id))})]}),0===k.length&&0===E.length&&(0,a.jsx)("p",{className:"text-muted fst-italic",children:"No attachments uploaded."})]})]})})]})})}),(0,a.jsx)("div",{className:"modal fade",id:"attachmentsModal",tabIndex:-1,"aria-labelledby":"attachmentsModalLabel","aria-hidden":"true",children:(0,a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header border-0",children:[(0,a.jsxs)("h5",{className:"modal-title",id:"attachmentsModalLabel",children:["All Attachments (",E.length+k.length,")"]}),(0,a.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,a.jsxs)("div",{className:"modal-body p-0",children:[(0,a.jsxs)("ul",{className:"nav nav-tabs nav-fill px-3 pt-3 border-bottom",id:"attachmentTabs",role:"tablist",children:[(0,a.jsx)("li",{className:"nav-item",role:"presentation",children:(0,a.jsxs)("button",{className:"nav-link active",id:"images-tab","data-bs-toggle":"tab","data-bs-target":"#images",type:"button",role:"tab","aria-controls":"images","aria-selected":"true",children:["Images (",E.length,")"]})}),(0,a.jsx)("li",{className:"nav-item",role:"presentation",children:(0,a.jsxs)("button",{className:"nav-link",id:"files-tab","data-bs-toggle":"tab","data-bs-target":"#files",type:"button",role:"tab","aria-controls":"files","aria-selected":"false",children:["Files (",k.length,")"]})})]}),(0,a.jsxs)("div",{className:"tab-content p-3",children:[(0,a.jsx)("div",{className:"tab-pane fade show active",id:"images",role:"tabpanel","aria-labelledby":"images-tab",children:E.length>0?(0,a.jsx)("div",{className:"row g-3",children:E.map(e=>(0,a.jsx)("div",{className:"col-6 col-md-4 col-lg-3",children:(0,a.jsxs)("div",{className:"border rounded overflow-hidden shadow-sm",children:[(0,a.jsx)(n.default,{src:"".concat(e.file.replace(/^\/+/,"")),width:200,height:200,alt:e.file_name||d(e.file),className:"img-fluid",style:{objectFit:"cover",height:"150px"},loading:"lazy",unoptimized:!0}),(0,a.jsxs)("div",{className:"p-2 bg-light",children:[(0,a.jsx)("div",{className:"fw-semibold text-truncate",children:e.file_name||d(e.file)}),(0,a.jsx)("small",{className:"text-muted",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})]})},e.id))}):(0,a.jsx)("div",{className:"text-center py-5 text-muted",children:"No images found."})}),(0,a.jsx)("div",{className:"tab-pane fade",id:"files",role:"tabpanel","aria-labelledby":"files-tab",children:k.length>0?(0,a.jsx)("div",{className:"list-group",children:k.map(e=>(0,a.jsxs)("div",{className:"list-group-item d-flex align-items-center gap-3",children:[(0,a.jsx)(n.default,{src:"/assets/img/icons/pdf-img.svg",width:27,height:32,alt:"Pdf Icon"}),(0,a.jsxs)("div",{className:"flex-grow-1",children:[(0,a.jsx)("div",{className:"fw-semibold text-black mb-1",children:e.file_name||d(e.file)}),(0,a.jsx)("div",{className:"fs-12 text-muted",children:new Date(e.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit"})}),e.description&&(0,a.jsx)("div",{className:"mt-1 small",children:e.description})]}),(0,a.jsx)(i.default,{href:"".concat("https://api.ezsubcontractor.com/api/").concat(e.file.replace(/^\/+/,"")),target:"_blank",rel:"noopener noreferrer",className:"btn btn-sm btn-outline-primary",children:"Download"})]},e.id))}):(0,a.jsx)("div",{className:"text-center py-5 text-muted",children:"No files found."})})]})]}),(0,a.jsx)("div",{className:"modal-footer border-0",children:(0,a.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"})})]})})}),(0,a.jsx)("div",{className:"modal fade",id:"deleteProjectModal",tabIndex:-1,"aria-labelledby":"deleteProjectModalLabel","aria-hidden":"true",children:(0,a.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,a.jsxs)("div",{className:"modal-content",children:[(0,a.jsxs)("div",{className:"modal-header border-0",children:[(0,a.jsx)("h5",{className:"modal-title",id:"deleteProjectModalLabel",children:"Delete Project"}),(0,a.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,a.jsxs)("div",{className:"modal-body",children:["Are you sure you want to delete this project? This action cannot be undone.",p&&(0,a.jsx)("div",{className:"alert alert-danger mt-3 p-2 mb-0",children:p})]}),(0,a.jsxs)("div",{className:"modal-footer border-0",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),(0,a.jsx)("button",{type:"button",className:"btn btn-danger",onClick:_,disabled:j,children:j?"Deleting...":"Delete"})]})]})})}),(0,a.jsx)(o.Z,{})]})}},62562:function(){},672:function(){}},function(e){e.O(0,[9412,8305,9768,4974,8148,2971,7023,1744],function(){return e(e.s=45266)}),_N_E=e.O()}]);