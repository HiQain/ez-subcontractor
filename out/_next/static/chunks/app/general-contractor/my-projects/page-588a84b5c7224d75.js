(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4496],{88572:function(e,t,a){Promise.resolve().then(a.bind(a,58229))},16463:function(e,t,a){"use strict";var s=a(71169);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}})},36037:function(e,t,a){"use strict";a.d(t,{Z:function(){return o}});var s=a(57437),n=a(87138),r=a(66648),l=a(2265);function o(){let[e,t]=(0,l.useState)("");return(0,s.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"footer-main",children:(0,s.jsxs)("div",{className:"row g-3",children:[(0,s.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,s.jsx)(n.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,s.jsx)(r.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,s.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,s.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,s.jsx)("div",{className:"footer-title",children:"Menu"}),(0,s.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,s.jsx)("li",{children:(0,s.jsx)(n.default,{href:"/",children:"Home"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.default,{href:"/subscription",children:"Free Trial"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.default,{href:"/how-it-works",children:"How It Works"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,s.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,s.jsx)("div",{className:"footer-title",children:"Other"}),(0,s.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,s.jsx)("li",{children:(0,s.jsx)(n.default,{href:"/faq",children:"FAQs"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,s.jsx)("li",{children:(0,s.jsx)(n.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,s.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,s.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,s.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(r.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,s.jsx)(n.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,s.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,s.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,s.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,s.jsx)(n.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}a(62562)},58229:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return i}});var s=a(57437),n=a(2265),r=a(66648),l=a(16463),o=a(18148),c=a(36037);function i(){let e=(0,l.useRouter)(),[t,a]=(0,n.useState)("all"),[i,d]=(0,n.useState)([]),[m,u]=(0,n.useState)([]),[h,p]=(0,n.useState)(!0),[x,f]=(0,n.useState)(null),[j,g]=(0,n.useState)(null),[b,v]=(0,n.useState)(null),y=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=document.createElement("div");a.innerHTML='\n            <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true" style="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 9999;\n                min-width: 320px;\n                background-color: '.concat("success"===t?"#d4edda":"#f8d7da",";\n                color: ").concat("success"===t?"#155724":"#721c24",";\n                border: 1px solid ").concat("success"===t?"#c3e6cb":"#f5c6cb",';\n                border-radius: 8px;\n                padding: 14px 20px;\n                box-shadow: 0 6px 16px rgba(0,0,0,0.12);\n                display: flex;\n                align-items: center;\n                gap: 12px;\n                font-weight: 500;\n                font-size: 15px;\n                animation: toastFadeIn 0.4s ease forwards;\n            ">\n                <span>').concat("success"===t?"✅":"❌"," ").concat(e,'</span>\n                <button type="button" class="btn-close" style="\n                    font-size: 16px;\n                    margin-left: auto;\n                    opacity: 0.7;\n                " data-bs-dismiss="toast"></button>\n            </div>\n        ');let s=document.createElement("style");s.textContent="\n            @keyframes toastFadeIn {\n                from { opacity: 0; transform: translateX(100%); }\n                to { opacity: 1; transform: translateX(0); }\n            }\n        ",document.head.appendChild(s),document.body.appendChild(a);let n=setTimeout(()=>{let e=document.createElement("style");e.textContent="\n                .toast { \n                    animation: toastFadeOut 0.4s forwards !important; \n                }\n                @keyframes toastFadeOut {\n                    from { opacity: 1; transform: translateX(0); }\n                    to { opacity: 0; transform: translateX(100%); }\n                }\n            ",document.head.appendChild(e),setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a),document.head.removeChild(e)},400)},3500),r=a.querySelector(".btn-close");null==r||r.addEventListener("click",()=>{clearTimeout(n);let e=document.createElement("style");e.textContent="\n                @keyframes toastFadeOut {\n                    from { opacity: 1; transform: translateX(0); }\n                    to { opacity: 0; transform: translateX(100%); }\n                }\n            ",document.head.appendChild(e),a.style.animation="toastFadeOut 0.4s forwards",setTimeout(()=>{a.parentNode&&a.parentNode.removeChild(a),document.head.removeChild(e)},400)})},w=e=>{g(e),v(null);let t=document.getElementById("deleteProjectModal");t&&window.bootstrap&&new window.bootstrap.Modal(t).show()};(0,n.useEffect)(()=>{(async()=>{p(!0),f(null);try{var t,a,s;let n=localStorage.getItem("token");if(!n){f("Authentication required. Please log in."),e.push("/auth/login");return}let r=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/projects/my-projects?perPage=100&page=1"),{headers:{Authorization:"Bearer ".concat(n),Accept:"application/json"}});if(401===r.status){localStorage.removeItem("token"),f("Session expired. Please log in again."),e.push("/auth/login");return}let l=await r.json();if(!r.ok)throw Error((null===(s=l.message)||void 0===s?void 0:s[0])||"Failed to load projects");let o=[];(null==l?void 0:null===(a=l.data)||void 0===a?void 0:null===(t=a.projects)||void 0===t?void 0:t.data)&&Array.isArray(l.data.projects.data)?o=[...l.data.projects.data].reverse():console.warn("Unexpected API structure:",l),u(o)}catch(e){console.error("Fetch error:",e),f(e.message||"Network error. Please try again."),y("Failed to load projects.","error")}finally{p(!1)}})()},[e]);let N=async()=>{if(j){v(null);try{let e=localStorage.getItem("token");if(!e)throw Error("Not authenticated");let t=new FormData;t.append("project_id",j.toString());let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/projects/delete/").concat(j),{method:"DELETE",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"},body:t});if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"Failed to delete project")}u(e=>e.filter(e=>e.id!==j)),y("Project deleted successfully.","success");let s=document.getElementById("deleteProjectModal");if(s&&window.bootstrap){let e=window.bootstrap.Modal.getInstance(s);null==e||e.hide()}}catch(t){console.error("Delete error:",t);let e=t.message||"Failed to delete project. Please try again.";v(e),y(e,"error")}finally{g(null)}}},k=e=>{switch(e.toLowerCase()){case"hired":return"#007AFF";case"active":return"#28a745";case"pending":return"#FF9500";case"completed":default:return"#6c757d";case"cancelled":return"#dc3545"}},C=e=>{switch(e.toLowerCase()){case"hired":return"Hired";case"active":return"Active";case"pending":return"Pending";case"completed":return"Completed";case"cancelled":return"Cancelled";default:return e.charAt(0).toUpperCase()+e.slice(1)}},P="all"===t?m:"hired"===t?m.filter(e=>"hired"===e.status.toLowerCase()):"active"===t?m.filter(e=>"active"===e.status.toLowerCase()):[];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{}),(0,s.jsx)("section",{className:"banner-sec trial review",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"right-bar",children:[(0,s.jsxs)("div",{className:"bar d-flex align-items-center gap-2 justify-content-between flex-wrap mb-4",children:[(0,s.jsx)("div",{className:"fs-4 fw-semibold",children:"My Projects"}),(0,s.jsxs)("button",{onClick:()=>e.push("/general-contractor/add-project"),className:"btn btn-primary rounded-3 d-flex align-items-center gap-2",children:[(0,s.jsx)(r.default,{src:"/assets/img/icons/plus.svg",width:12,height:12,alt:"Add Icon"}),(0,s.jsx)("span",{children:"Add Project"})]})]}),(0,s.jsxs)("ul",{className:"nav nav-tabs mb-4",role:"tablist",children:[(0,s.jsx)("li",{className:"nav-item",role:"presentation",children:(0,s.jsxs)("button",{className:"nav-link ".concat("all"===t?"active":""),type:"button",onClick:()=>a("all"),children:["All (",m.length,")"]})}),(0,s.jsx)("li",{className:"nav-item",role:"presentation",children:(0,s.jsxs)("button",{className:"nav-link ".concat("hired"===t?"active":""),type:"button",onClick:()=>a("hired"),children:["Hired (",m.filter(e=>"hired"===e.status.toLowerCase()).length,")"]})}),(0,s.jsx)("li",{className:"nav-item",role:"presentation",children:(0,s.jsxs)("button",{className:"nav-link ".concat("active"===t?"active":""),type:"button",onClick:()=>a("active"),children:["Active (",m.filter(e=>"active"===e.status.toLowerCase()).length,")"]})}),(0,s.jsx)("div",{className:"slider"})]}),h?(0,s.jsxs)("div",{className:"text-center py-5",children:[(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,s.jsx)("p",{className:"mt-3",children:"Loading your projects..."})]}):x?(0,s.jsxs)("div",{className:"alert alert-danger d-flex align-items-center",role:"alert",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-exclamation-triangle-fill flex-shrink-0 me-2",viewBox:"0 0 16 16",children:(0,s.jsx)("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})}),(0,s.jsx)("div",{children:x})]}):0===P.length?(0,s.jsxs)("div",{className:"text-center py-5",children:[(0,s.jsx)(r.default,{src:"/assets/img/post.webp",width:120,height:120,alt:"No projects",className:"mb-3"}),(0,s.jsx)("p",{className:"fs-5 text-muted",children:"all"===t?"You don’t have any projects yet.":"No ".concat(t," projects found.")})]}):(0,s.jsx)("div",{className:"row g-4",children:P.map((t,a)=>{var n;return(0,s.jsx)("div",{className:"col-lg-6",children:(0,s.jsxs)("div",{className:"project-card call-dark custom-card p-4",children:[(0,s.jsxs)("div",{className:"bar d-flex align-items-center justify-content-between gap-2 flex-wrap mb-3",children:[(0,s.jsx)("div",{className:"fs-5 fw-semibold",children:(null===(n=t.category)||void 0===n?void 0:n.name)||"".concat(t.city,", ").concat(t.state)}),(0,s.jsx)("div",{className:"btn p-1 ps-3 pe-3 fs-12",style:{backgroundColor:"".concat(k(t.status),"15"),color:k(t.status),fontWeight:500},children:C(t.status)})]}),(0,s.jsx)("p",{className:"description mb-4",dangerouslySetInnerHTML:{__html:i.includes(a)?t.description:(()=>{let e=document.createElement("div");e.innerHTML=t.description||"";let a=e.textContent||e.innerText||"";return a.length>120?a.slice(0,120)+"…":a})()}}),(0,s.jsxs)("div",{className:"buttons d-flex align-items-center gap-2 flex-wrap-md",children:[(0,s.jsx)("button",{className:"btn btn-primary rounded-3 w-100 justify-content-center",onClick:()=>{localStorage.setItem("project-id","".concat(t.id)),e.push("/general-contractor/project-details")},children:"View Details"}),(0,s.jsx)("button",{className:"btn bg-dark rounded-3 w-100 justify-content-center text-white",onClick:()=>{localStorage.setItem("project-id","".concat(t.id)),e.push("/general-contractor/edit-project")},children:"Edit"}),(0,s.jsx)("button",{className:"btn bg-danger text-white rounded-3 w-100 justify-content-center",onClick:()=>w(t.id),children:"Delete"})]})]})},t.id)})})]})})}),(0,s.jsx)("div",{className:"modal fade",id:"deleteProjectModal",tabIndex:-1,"aria-labelledby":"deleteProjectModalLabel","aria-hidden":"true",children:(0,s.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,s.jsxs)("div",{className:"modal-content",children:[(0,s.jsxs)("div",{className:"modal-header border-0",children:[(0,s.jsx)("h5",{className:"modal-title",id:"deleteProjectModalLabel",children:"Delete Project"}),(0,s.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,s.jsxs)("div",{className:"modal-body",children:["Are you sure you want to delete this project? This action cannot be undone.",b&&(0,s.jsx)("div",{className:"alert alert-danger mt-3 p-2 mb-0",children:b})]}),(0,s.jsxs)("div",{className:"modal-footer border-0",children:[(0,s.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Cancel"}),(0,s.jsx)("button",{type:"button",className:"btn btn-danger",onClick:N,disabled:null===j,children:"Delete"})]})]})})}),(0,s.jsx)(c.Z,{})]})}a(86689)},62562:function(){},86689:function(){}},function(e){e.O(0,[9412,8305,6628,4974,8148,2971,7023,1744],function(){return e(e.s=88572)}),_N_E=e.O()}]);