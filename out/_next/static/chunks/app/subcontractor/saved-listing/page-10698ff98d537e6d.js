(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6033],{11281:function(e,t,s){Promise.resolve().then(s.bind(s,35979))},16463:function(e,t,s){"use strict";var a=s(71169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},36037:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(57437),i=s(87138),o=s(66648),r=s(2265);function l(){let[e,t]=(0,r.useState)("");return(0,a.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"footer-main",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,a.jsx)(i.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,a.jsx)(o.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,a.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Menu"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/subscription",children:"Free Trial"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/how-it-works",children:"How It Works"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Other"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/faq",children:"FAQs"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,a.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)(o.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,a.jsx)(i.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,a.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,a.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,a.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,a.jsx)(i.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}s(62562)},41862:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var a=s(57437),i=s(66648),o=s(87138),r=s(16463);let l=[{href:"/subcontractor/edit-profile",label:"Edit Profile",icon:"/assets/img/icons/user.svg"},{href:"/subcontractor/change-password",label:"Change Password",icon:"/assets/img/icons/lock.svg"},{href:"/subcontractor/saved-listing",label:"Saved Listing",icon:"/assets/img/icons/saved.svg"},{href:"/subcontractor/my-subscription",label:"My Subscription",icon:"/assets/img/icons/subscription.svg"},{href:"/subcontractor/transaction-history",label:"Transaction History",icon:"/assets/img/icons/transactions.svg"}];function n(e){let{onLogout:t}=e,s=(0,r.usePathname)();return(0,a.jsxs)("div",{className:"sidebar",children:[(0,a.jsx)("div",{className:"main-wrapper bg-dark m-0",children:(0,a.jsx)("div",{className:"buttons-wrapper",children:l.map(e=>(0,a.jsxs)(o.default,{href:e.href,className:"custom-btn ".concat(s===e.href?"active":""),children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(i.default,{src:e.icon,width:20,height:20,alt:"".concat(e.label," Icon"),loading:"lazy"}),(0,a.jsx)("span",{className:"text-white",children:e.label})]}),(0,a.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]},e.href))})}),(0,a.jsx)("div",{className:"bottom-bar",children:(0,a.jsx)("div",{className:"buttons-wrapper",children:(0,a.jsxs)("button",{onClick:t||(()=>{}),className:"custom-btn bg-danger",style:{borderColor:"#DC2626"},children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(i.default,{src:"/assets/img/icons/logout.svg",width:20,height:20,alt:"Logout Icon",loading:"lazy"}),(0,a.jsx)("span",{className:"text-white",children:"Logout"})]}),(0,a.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]})})})]})}},35979:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(57437),i=s(2265),o=s(66648),r=s(87138),l=s(16463),n=s(18148),c=s(36037);s(5360);var d=s(41862);function h(){let e=(0,l.useRouter)();(0,l.usePathname)();let[t,s]=(0,i.useState)([]),[h,m]=(0,i.useState)([]),[u,g]=(0,i.useState)(new Set),[p,f]=(0,i.useState)(!0),[x,v]=(0,i.useState)(null),[j,b]=(0,i.useState)([]),[y,w]=(0,i.useState)(""),[N,S]=(0,i.useState)(!1),[k,C]=(0,i.useState)(null),I=(0,i.useRef)([]),z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",s=document.createElement("div");s.innerHTML='\n            <div className="toast show" role="alert" aria-live="assertive" aria-atomic="true" style="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 9999;\n                min-width: 300px;\n                background-color: '.concat("success"===t?"#d4edda":"#f8d7da",";\n                color: ").concat("success"===t?"#155724":"#721c24",";\n                border: 1px solid ").concat("success"===t?"#c3e6cb":"#f5c6cb",';\n                border-radius: 8px;\n                padding: 12px 20px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                font-weight: 500;\n            ">\n                <span>').concat("success"===t?"✅":"❌"," ").concat(e,'</span>\n                <button type="button" className="btn-close" style="font-size: 14px; margin-left: auto;" data-bs-dismiss="toast"></button>\n            </div>\n        '),document.body.appendChild(s);let a=setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},4e3),i=s.querySelector(".btn-close");null==i||i.addEventListener("click",()=>{clearTimeout(a),s.parentNode&&s.parentNode.removeChild(s)})};(0,i.useEffect)(()=>{let e=localStorage.getItem("token"),t=async()=>{try{var t;let s=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/get-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(!s.ok)throw Error("Failed to fetch profile");let a=await s.json(),i=null==a?void 0:null===(t=a.data)||void 0===t?void 0:t.subscription_id;i&&(localStorage.setItem("subscription",i),C(i))}catch(e){console.error("Profile fetch error:",e)}};e&&t()},[]),(0,i.useEffect)(()=>{let t=localStorage.getItem("token");if(!t){e.push("/auth/login");return}(async()=>{try{var s,a;let i=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/projects/my-saved"),{headers:{Authorization:"Bearer ".concat(t),Accept:"application/json"}});if(401===i.status){localStorage.removeItem("token"),e.push("/auth/login");return}let o=await i.json();if(!i.ok)throw Error((null===(a=o.message)||void 0===a?void 0:a[0])||"Failed to load saved projects");let r=(null===(s=o.data)||void 0===s?void 0:s.projects)||[];m(r),b(Array(r.length).fill(!1));let l=new Set(r.map(e=>"string"==typeof e.id?parseInt(e.id):Number(e.id)));g(l)}catch(e){console.error("Fetch saved projects error:",e),v(e.message||"Failed to load saved projects. Please try again.")}finally{f(!1)}})()},[e]);let P=h.filter(e=>{let t=y.toLowerCase().trim();if(!t)return!0;let s=e.city.toLowerCase().includes(t),a=e.state.toLowerCase().includes(t),i=e.category.name.toLowerCase().includes(t),o=e.description.toLowerCase().includes(t);return s||a||i||o});(0,i.useEffect)(()=>{let e=setTimeout(()=>{if(0===P.length)return;let e=[...j],t=!1;I.current.forEach((s,a)=>{if(s&&a<P.length){let i=parseFloat(window.getComputedStyle(s).lineHeight)||20,o=s.scrollHeight>3*i+2;o!==e[a]&&(e[a]=o,t=!0)}}),t&&b(e)},0);return()=>clearTimeout(e)},[P,t]);let E=e=>{s(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},L=e=>{let t=new Date,s=new Date(e),a=Math.floor((t.getTime()-s.getTime())/6e4),i=Math.floor(a/60),o=Math.floor(i/24);return a<1?"Just now":a<60?"".concat(a," min").concat(a>1?"s":""," ago"):i<24?"".concat(i," hour").concat(i>1?"s":""," ago"):"".concat(o," day").concat(o>1?"s":""," ago")},_=async t=>{try{let a=localStorage.getItem("token");if(!a){e.push("/auth/login");return}let i=u.has(t),o=new FormData;o.append("project_id",t.toString());let r=await fetch("".concat("https://api.ezsubcontractor.com/api/").concat(i?"common/projects/unsave":"common/projects/save"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),Accept:"application/json"},body:o});if(401===r.status){localStorage.removeItem("token"),e.push("/auth/login");return}let l=await r.json();if(!r.ok){var s;throw Error((null===(s=l.message)||void 0===s?void 0:s[0])||"Failed to ".concat(i?"unsave":"save"," project"))}g(e=>{let s=new Set(e);return i?(s.delete(t),z("Project removed from saved list","success")):(s.add(t),z("Project saved successfully!","success")),s})}catch(e){console.error("".concat(u.has(t)?"Unsave":"Save"," project error:"),e),z(e.message||"Failed to ".concat(u.has(t)?"unsave":"save"," project."),"error")}},T=()=>{w("")},F=async()=>{S(!0);try{let t;let s=localStorage.getItem("token");if(!s){e.push("/auth/login");return}let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}}),i=await a.text();try{t=i?JSON.parse(i):{}}catch(e){t={message:i}}a.ok?(localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("subscription"),e.push("/auth/login")):alert((null==t?void 0:t.message)||"Logout failed")}catch(e){console.error("Logout Error:",e),alert("Network error. Please try again.")}finally{S(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec profile",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsx)("div",{className:"col-xl-3",children:(0,a.jsx)(d.Z,{onLogout:F})}),(0,a.jsx)("div",{className:"col-xl-9",children:p?(0,a.jsx)("div",{className:"right-bar d-flex align-items-center justify-content-center",style:{height:"500px"},children:(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,a.jsxs)("div",{className:"right-bar",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap mb-5",children:[(0,a.jsx)("div",{className:"change fw-semibold fs-4",children:"Saved Listing"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsxs)("div",{className:"form-wrapper mt-0 mb-0 d-flex flex-nowrap",style:{minWidth:"clamp(200px,34vw,335px)"},children:[(0,a.jsx)(o.default,{src:"/assets/img/icons/search-gray.svg",width:18,height:18,alt:"Search Icon",loading:"lazy"}),(0,a.jsx)("input",{type:"text",placeholder:"Search city, state, category...",value:y,onChange:e=>w(e.target.value),className:"form-control shadow-none"})]}),y&&(0,a.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-dark",onClick:T,"aria-label":"Clear search",children:"Clear"})]})]}),x&&(0,a.jsx)("div",{className:"alert alert-danger mb-4",role:"alert",children:x}),0===P.length?(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)("p",{children:y?'No projects match "'.concat(y,'".'):"You haven’t saved any projects yet."}),y&&(0,a.jsx)("button",{className:"btn btn-outline-primary mt-2",onClick:T,children:"Clear Search"})]}):P.map((s,i)=>{var l,n,c,d,h,m,g;return(0,a.jsxs)("div",{className:"posted-card posted-card-1 custom-card mb-3",children:[(0,a.jsxs)("div",{className:"topbar mb-2",children:[k?(0,a.jsxs)("button",{className:"title p-0 border-0 bg-transparent text-start text-capitalize",onClick:()=>{localStorage.setItem("project-id",String(s.id)),e.push("/subcontractor/project-details")},children:[s.city,", ",s.state]}):(0,a.jsxs)("div",{className:"title text-capitalize",children:[s.city,", ",s.state]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)("div",{className:"date",children:L(s.created_at)}),(0,a.jsx)("button",{className:"icon bg-white ".concat(u.has(s.id)?"Saved bg-primary":"Save"),onClick:()=>_(s.id),"aria-label":u.has(s.id)?"Remove from saved":"Save project",children:(0,a.jsx)(o.default,{src:u.has(s.id)?"/assets/img/bookmark-filled.svg":"/assets/img/bookmark-outline.svg",width:16,height:16,alt:"save"})})]})]}),(0,a.jsx)("div",{className:"description-wrapper mb-2 position-relative",children:(0,a.jsx)("p",{className:"description mb-0 ".concat(t.includes(i)?"expanded":"collapsed"),style:{display:"-webkit-box",WebkitLineClamp:t.includes(i)?"unset":3,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis",maxHeight:t.includes(i)?"none":"calc(1.5em * 3)",transition:"max-height 0.2s ease"},dangerouslySetInnerHTML:{__html:s.description.replace(/<[^>]*>/g,"").trim()||"No description provided."}})}),j[i]&&(0,a.jsx)("button",{className:"see-more-btn d-block",onClick:()=>E(i),children:t.includes(i)?"See less":"See more"}),k&&(0,a.jsxs)("div",{className:"bottom-bar",children:[(0,a.jsxs)("div",{className:"left",children:[(null===(l=s.user)||void 0===l?void 0:l.profile_image_url)?(0,a.jsx)(o.default,{src:null===(n=s.user)||void 0===n?void 0:n.profile_image_url,width:40,height:40,alt:"P Icon",loading:"lazy",className:"rounded-circle"}):(0,a.jsx)(o.default,{src:"/assets/img/placeholder-round.png",width:40,height:40,alt:"P Icon",loading:"lazy",className:"rounded-circle"}),(0,a.jsx)("p",{className:"mb-0 fw-semibold",children:(null===(c=s.user)||void 0===c?void 0:c.company_name)||""})]}),(0,a.jsxs)("div",{className:"d-flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>{localStorage.setItem("project-id",String(s.id)),e.push("/subcontractor/project-details")},className:"btn btn-primary me-2 btn-sm py-1 px-4",children:"View More"}),s.user&&(0,a.jsxs)("div",{className:"social-icons",children:[(null===(d=s.user)||void 0===d?void 0:d.email)&&(0,a.jsx)(r.default,{href:"mailto:"+(null===(h=s.user)||void 0===h?void 0:h.email),className:"icon",children:(0,a.jsx)(o.default,{src:"/assets/img/icons/message-white.svg",width:20,height:20,alt:"Social Icon",loading:"lazy"})}),(0,a.jsx)(r.default,{href:{pathname:"/messages",query:{userId:s.user.id,name:s.user.name,email:s.user.email,phone:s.user.phone,companyName:s.user.company_name}},className:"icon",children:(0,a.jsx)(o.default,{src:"/assets/img/icons/chat.svg",width:20,height:20,alt:"Social Icon",loading:"lazy"})}),(null===(m=s.user)||void 0===m?void 0:m.phone)&&(0,a.jsx)(r.default,{href:"mailto:"+(null===(g=s.user)||void 0===g?void 0:g.phone),className:"icon",children:(0,a.jsx)(o.default,{src:"/assets/img/icons/call-white.svg",width:20,height:20,alt:"Social Icon",loading:"lazy"})})]})]})]})]},s.id)})]})})]})})})}),(0,a.jsx)(c.Z,{})]})}},62562:function(){},5360:function(){}},function(e){e.O(0,[9412,8305,6628,4974,8148,2971,7023,1744],function(){return e(e.s=11281)}),_N_E=e.O()}]);