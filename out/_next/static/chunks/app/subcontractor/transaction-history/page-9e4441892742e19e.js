(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5362],{51321:function(e,s,t){Promise.resolve().then(t.bind(t,42861))},16463:function(e,s,t){"use strict";var a=t(71169);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},36037:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});var a=t(57437),n=t(87138),r=t(66648),i=t(2265);function l(){let[e,s]=(0,i.useState)("");return(0,a.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"footer-main",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,a.jsx)(n.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,a.jsx)(r.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,a.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Menu"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/subscription",children:"Free Trial"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/how-it-works",children:"How It Works"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Other"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/faq",children:"FAQs"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,a.jsx)("li",{children:(0,a.jsx)(n.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,a.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)(r.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,a.jsx)(n.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,a.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,a.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,a.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,a.jsx)(n.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}t(62562)},41862:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(57437),n=t(66648),r=t(87138),i=t(16463);let l=[{href:"/subcontractor/edit-profile",label:"Edit Profile",icon:"/assets/img/icons/user.svg"},{href:"/subcontractor/change-password",label:"Change Password",icon:"/assets/img/icons/lock.svg"},{href:"/subcontractor/saved-listing",label:"Saved Listing",icon:"/assets/img/icons/saved.svg"},{href:"/subcontractor/my-subscription",label:"My Subscription",icon:"/assets/img/icons/subscription.svg"},{href:"/subcontractor/transaction-history",label:"Transaction History",icon:"/assets/img/icons/transactions.svg"}];function c(e){let{onLogout:s}=e,t=(0,i.usePathname)();return(0,a.jsxs)("div",{className:"sidebar",children:[(0,a.jsx)("div",{className:"main-wrapper bg-dark m-0",children:(0,a.jsx)("div",{className:"buttons-wrapper",children:l.map(e=>(0,a.jsxs)(r.default,{href:e.href,className:"custom-btn ".concat(t===e.href?"active":""),children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(n.default,{src:e.icon,width:20,height:20,alt:"".concat(e.label," Icon"),loading:"lazy"}),(0,a.jsx)("span",{className:"text-white",children:e.label})]}),(0,a.jsx)(n.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]},e.href))})}),(0,a.jsx)("div",{className:"bottom-bar",children:(0,a.jsx)("div",{className:"buttons-wrapper",children:(0,a.jsxs)("button",{onClick:s||(()=>{}),className:"custom-btn bg-danger",style:{borderColor:"#DC2626"},children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(n.default,{src:"/assets/img/icons/logout.svg",width:20,height:20,alt:"Logout Icon",loading:"lazy"}),(0,a.jsx)("span",{className:"text-white",children:"Logout"})]}),(0,a.jsx)(n.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]})})})]})}},42861:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var a=t(57437),n=t(18148),r=t(36037);t(5360);var i=t(16463),l=t(2265),c=t(41862);function o(){let e=(0,i.useRouter)();(0,i.usePathname)();let[s,t]=(0,l.useState)([]),[o,d]=(0,l.useState)(!1),[h,u]=(0,l.useState)(null),[m,x]=(0,l.useState)(""),[f,g]=(0,l.useState)([]),[j,p]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{d(!0),u(null);try{let s=localStorage.getItem("token"),a=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/subscription/transactions"),{headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)}}}),n=await a.json();if(!a.ok||!n.success){var e;throw Error((null===(e=n.message)||void 0===e?void 0:e[0])||"Failed to fetch transactions")}t(n.data)}catch(e){u(e.message||"Something went wrong")}finally{d(!1)}})()},[]),(0,l.useEffect)(()=>{if(m.trim()){let e=m.toLowerCase();g(s.filter(s=>s.transaction_id.toLowerCase().includes(e)||s.plan.name.toLowerCase().includes(e)||s.card_holder.toLowerCase().includes(e)||s.amount.toLowerCase().includes(e)))}else g(s)},[m,s]);let v=async()=>{p(!0);try{let s;let t=localStorage.getItem("token");if(!t){e.push("/auth/login");return}let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),n=await a.text();try{s=n?JSON.parse(n):{}}catch(e){s={message:n}}a.ok?(localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("subscription"),e.push("/auth/login")):alert((null==s?void 0:s.message)||"Logout failed")}catch(e){console.error("Logout Error:",e),alert("Network error. Please try again.")}finally{p(!1)}};return(0,a.jsxs)("div",{children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec profile",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsx)("div",{className:"col-xl-3",children:(0,a.jsx)(c.Z,{onLogout:v})}),(0,a.jsx)("div",{className:"col-xl-9",children:(0,a.jsxs)("div",{className:"right-bar",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap mb-4",children:[(0,a.jsx)("div",{className:"change fw-semibold fs-4",children:"Transaction History"}),(0,a.jsx)("div",{className:"form-wrapper mb-0",style:{flexGrow:1,maxWidth:"300px"},children:(0,a.jsx)("input",{type:"text",placeholder:"Search here",value:m,onChange:e=>x(e.target.value)})})]}),(0,a.jsx)("div",{className:"p-0 mb-4",children:(0,a.jsx)("div",{className:"table-responsive",children:o?(0,a.jsx)("p",{className:"p-4",children:"Loading transactions..."}):h?(0,a.jsx)("p",{className:"text-danger",children:h}):0===s.length?(0,a.jsx)("p",{className:"p-4",children:"No transactions found."}):(0,a.jsxs)("table",{className:"custom-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"S. No"}),(0,a.jsx)("th",{children:"Transaction ID"}),(0,a.jsx)("th",{children:"Subscription"}),(0,a.jsx)("th",{children:"Card"}),(0,a.jsx)("th",{children:"Date and Time"}),(0,a.jsx)("th",{children:"Amount"})]})}),(0,a.jsx)("tbody",{children:0===f.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:6,className:"text-center",children:"No transactions found"})}):f.map((e,s)=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:s+1}),(0,a.jsx)("td",{children:e.transaction_id}),(0,a.jsx)("td",{children:e.plan.name}),(0,a.jsxs)("td",{children:[e.card_brand," ****",e.card_last4," (",e.card_holder,")"]}),(0,a.jsx)("td",{children:new Date(e.created_at).toLocaleString()}),(0,a.jsxs)("td",{children:["$",e.amount]})]},e.id))})]})})})]})})]})})})}),(0,a.jsx)(r.Z,{})]})}},62562:function(){},5360:function(){}},function(e){e.O(0,[9412,8305,6628,4974,8148,2971,7023,1744],function(){return e(e.s=51321)}),_N_E=e.O()}]);