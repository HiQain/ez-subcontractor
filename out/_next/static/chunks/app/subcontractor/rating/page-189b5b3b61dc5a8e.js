(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{28888:function(e,s,t){Promise.resolve().then(t.bind(t,30240))},16463:function(e,s,t){"use strict";var a=t(71169);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},36037:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(57437),i=t(87138),n=t(66648),l=t(2265);function r(){let[e,s]=(0,l.useState)("");return(0,a.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"footer-main",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,a.jsx)(i.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,a.jsx)(n.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,a.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Menu"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/subscription",children:"Free Trial"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/how-it-works",children:"How It Works"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Other"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/faq",children:"FAQs"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,a.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)(n.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,a.jsx)(i.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,a.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,a.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,a.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,a.jsx)(i.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}t(62562)},30240:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return o}});var a=t(57437),i=t(2265),n=t(87138),l=t(66648),r=t(18148),c=t(36037);function o(){let[e,s]=(0,i.useState)(!0),[t,o]=(0,i.useState)(null),[d,m]=(0,i.useState)([]),[h,u]=(0,i.useState)(0),[g,x]=(0,i.useState)(!1),[f,j]=(0,i.useState)("All Ratings"),[v,p]=(0,i.useState)(null),w=e=>{if(j(e),x(!1),"All Ratings"===e)p(null);else{let s=e.match(/^(\d+)/);p(s?parseInt(s[1],10):null)}},N=e=>[...e].sort((e,s)=>s.rating-e.rating);(0,i.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){console.warn("No token found. Redirecting to login."),s(!1),window.location.href="/auth/login";return}(async()=>{try{var t,a;let s=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/rating/my-ratings"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),Accept:"application/json"}});if(401===s.status){localStorage.removeItem("token"),window.location.href="/auth/login";return}let i=await s.json();if(!s.ok)throw Error((null===(a=i.message)||void 0===a?void 0:a[0])||"Failed to load ratings");let n=(null===(t=i.data)||void 0===t?void 0:t.map(e=>{var s,t,a,i,n;return{id:e.id,user_id:e.user_id,contractor_id:e.rated_user_id||e.contractor_id,rating:parseFloat(e.rating)||0,comment:e.comment||"",created_at:e.created_at,rated_given_by_user:{id:(null===(s=e.rated_given_by_user)||void 0===s?void 0:s.id)||"",name:(null===(t=e.rated_given_by_user)||void 0===t?void 0:t.name)||"Anonymous",email:(null===(a=e.rated_given_by_user)||void 0===a?void 0:a.email)||"",phone:(null===(i=e.rated_given_by_user)||void 0===i?void 0:i.phone)||"",profile_image_url:(null===(n=e.rated_given_by_user)||void 0===n?void 0:n.profile_image_url)||"/assets/img/client-1.webp"}}}))||[];if(m(N(n)),n.length>0){let e=n.reduce((e,s)=>e+s.rating,0)/n.length;u(parseFloat(e.toFixed(1)))}else u(0)}catch(e){console.error("Fetch ratings error:",e),o(e.message||"Failed to load ratings. Please try again.")}finally{s(!1)}})()},[]);let y=N(d.filter(e=>null===v||e.rating>=v&&e.rating<v+1)),b=e=>{let s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/6e4),i=Math.floor(a/60),n=Math.floor(i/24);return a<1?"Just now":a<60?"".concat(a," min").concat(a>1?"s":""," ago"):i<24?"".concat(i," hour").concat(i>1?"s":""," ago"):"".concat(n," day").concat(n>1?"s":""," ago")},_=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,t=[],i=Math.floor(e);for(let e=0;e<i;e++)t.push((0,a.jsx)(l.default,{src:"/assets/img/start1.svg",width:s,height:s,alt:"Full Star",loading:"lazy"},"full-".concat(e)));e%1>=.5&&t.push((0,a.jsx)(l.default,{src:"/assets/img/star2.svg",width:s,height:s,alt:"Half Star",loading:"lazy"},"half"));let n=5-t.length;for(let e=0;e<n;e++)t.push((0,a.jsx)(l.default,{src:"/assets/img/star-empty.svg",width:s,height:s,alt:"Empty Star",loading:"lazy"},"empty-".concat(e)));return t};return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec reviews position-static",children:(0,a.jsx)("div",{className:"container d-flex justify-content-center align-items-center",style:{minHeight:"50vh"},children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("p",{className:"mt-2",children:"Loading ratings..."})]})})})}),(0,a.jsx)(c.Z,{})]}):t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec reviews position-static",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsx)("div",{className:"row",children:(0,a.jsxs)("div",{className:"col-12 text-center py-5",children:[(0,a.jsx)("p",{className:"text-danger",children:t}),(0,a.jsx)("button",{className:"btn btn-primary mt-3",onClick:()=>window.location.reload(),children:"Retry"})]})})})})}),(0,a.jsx)(c.Z,{})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec reviews position-static",children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap mb-5",children:[(0,a.jsx)("div",{className:"rating fw-semibold fs-5",children:"Rating"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)("div",{style:{whiteSpace:"nowrap"},className:"fw-semibold fs-5",children:"Filter by:"}),(0,a.jsx)("div",{className:"input-wrapper d-flex flex-column position-relative w-100",children:(0,a.jsxs)("div",{style:{minWidth:"clamp(180px,28vw,288px)"},className:"custom-select w-100 ".concat(g?"open":""),onClick:()=>x(!g),children:[(0,a.jsx)("div",{className:"select-selected",children:f}),(0,a.jsx)("i",{className:"bi bi-chevron-down select-arrow"}),(0,a.jsx)("ul",{className:"select-options",children:["All Ratings","5 Star","4 Star","3 Star","2 Star","1 Star"].map((e,s)=>(0,a.jsx)("li",{onClick:s=>{s.stopPropagation(),w(e)},children:e},s))})]})})]})]}),(0,a.jsxs)("div",{className:"d-flex flex-column gap-3 align-items-center justify-content-center mb-5",children:[(0,a.jsxs)("div",{className:"rating-icons d-flex align-items-center gap-1 flex-wrap",children:[_(h,50)," "]}),(0,a.jsxs)("div",{className:"text-center fs-3 fw-bold",children:[parseFloat(h.toFixed(1)),"/5"]})]}),(0,a.jsx)("div",{className:"row g-4 mb-5",children:0===y.length?(0,a.jsx)("div",{className:"col-12 text-center py-5",children:(0,a.jsx)("p",{className:"text-gray-light",children:v?"No ".concat(v,"-star ratings found."):"You havenâ€™t received any ratings yet."})}):y.map(e=>(0,a.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,a.jsxs)("div",{className:"review-card",children:[(0,a.jsxs)("div",{className:"content d-flex align-items-center gap-1 justify-content-between flex-wrap mb-4",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[(0,a.jsx)("div",{className:"rating-icons d-flex align-items-center gap-1 flex-wrap",children:_(e.rating,20)}),(0,a.jsxs)("div",{className:"content fw-medium",children:[e.rating.toFixed(1),"/5"]})]}),(0,a.jsx)("div",{className:"time text-gray-light fs-14",children:b(e.created_at)})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 flex-wrap justify-content-between",children:[(0,a.jsxs)("div",{className:"client-info d-flex align-items-center gap-2",children:[(0,a.jsx)(l.default,{src:e.rated_given_by_user.profile_image_url||"/assets/img/client-1.webp",width:62,height:62,alt:"Client Image",loading:"lazy",className:"rounded-circle"}),(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("div",{className:"passion fs-14",children:"General Contractor"}),(0,a.jsx)("div",{className:"name fw-semibold text-black",children:e.rated_given_by_user.name})]})]}),(0,a.jsx)(l.default,{src:"/assets/img/quote.webp",className:"quote-icon",width:79,height:61,alt:"Quote Icon",loading:"lazy"})]})]})},e.id))}),(0,a.jsxs)(n.default,{href:"#",className:"btn bg-dark rounded-3 mx-auto d-flex justify-content-center align-items-center d-none",children:[(0,a.jsx)("span",{className:"text-white",children:"Load More"}),(0,a.jsx)(l.default,{src:"/assets/img/load-btn.svg",width:15,height:15,alt:"Arrow",loading:"lazy"})]})]})})}),(0,a.jsx)(c.Z,{})]})}t(85873)},62562:function(){},85873:function(){}},function(e){e.O(0,[9412,8305,6201,4974,8148,2971,7023,1744],function(){return e(e.s=28888)}),_N_E=e.O()}]);