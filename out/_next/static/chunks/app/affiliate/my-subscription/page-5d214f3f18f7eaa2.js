(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5265],{1820:function(e,s,t){Promise.resolve().then(t.bind(t,28922))},16463:function(e,s,t){"use strict";var a=t(71169);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},28922:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return h}});var a=t(57437),i=t(66648),n=t(18148),l=t(36037),c=t(64955);t(5360),t(59742);var r=t(16463),o=t(2265);function d(e){let{show:s,onClose:t,onConfirm:n,planName:l="this subscription"}=e;return s?(0,a.jsx)("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)",zIndex:1050,position:"fixed",top:0,left:0,width:"100vw",height:"100vh"},onClick:t,children:(0,a.jsx)("div",{className:"modal-dialog modal-dialog-centered",onClick:e=>e.stopPropagation(),children:(0,a.jsx)("div",{className:"modal-content",children:(0,a.jsxs)("div",{className:"modal-body p-4",children:[(0,a.jsx)("div",{className:"d-flex mb-3 justify-content-start",children:(0,a.jsx)(i.default,{src:"/assets/img/block-icon.svg",width:48,height:48,alt:"Cancel Subscription Icon",loading:"lazy"})}),(0,a.jsx)("h5",{className:"modal-title fw-semibold fs-5 mb-2",children:"Cancel Subscription"}),(0,a.jsxs)("p",{className:"text-muted mb-4",children:["Are you sure you want to cancel ",(0,a.jsx)("strong",{children:l}),"? You will continue to have access until the end of your billing cycle."]}),(0,a.jsxs)("div",{className:"d-flex gap-2 justify-content-center",children:[(0,a.jsx)("button",{type:"button",className:"btn btn-outline-dark rounded-3 px-4",onClick:t,children:"Keep Subscription"}),(0,a.jsx)("button",{type:"button",className:"btn bg-danger rounded-3 px-4 text-white",onClick:()=>{n(),t()},children:"Cancel Subscription"})]})]})})})}):null}function h(){let e=(0,r.useRouter)();(0,r.usePathname)();let[s,t]=(0,o.useState)([]),[h,m]=(0,o.useState)(!0),[u,f]=(0,o.useState)(null),[g,x]=(0,o.useState)(!1),[p,j]=(0,o.useState)(null),[b,v]=(0,o.useState)(!1);(0,o.useEffect)(()=>{N()},[]);let N=async()=>{let e=localStorage.getItem("token");if(!e){f("Unauthorized"),m(!1);return}try{let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/subscription/my-subscriptions"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}}),i=await a.json();if(!a.ok||!i.success){var s;throw Error((null===(s=i.message)||void 0===s?void 0:s[0])||"Failed to fetch subscriptions")}t(i.data.subscriptions||[])}catch(e){f(e.message||"Something went wrong")}finally{m(!1)}},y=async()=>{if(p)try{let s=localStorage.getItem("token"),t=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/subscription/cancel"),{method:"POST",headers:{Authorization:"Bearer ".concat(s),"Content-Type":"application/json"},body:JSON.stringify({subscription_id:p.id})}),a=await t.json();if(!t.ok||!a.success){var e;throw Error((null===(e=a.message)||void 0===e?void 0:e[0])||"Failed to cancel subscription")}x(!1),j(null),N()}catch(e){alert(e.message||"Cancel failed")}},w=async()=>{v(!0);try{let s;let t=localStorage.getItem("token");if(!t){e.push("/auth/login");return}let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}),i=await a.text();try{s=i?JSON.parse(i):{}}catch(e){s={message:i}}a.ok?(localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("subscription"),e.push("/auth/login")):alert((null==s?void 0:s.message)||"Logout failed")}catch(e){console.error("Logout Error:",e),alert("Network error. Please try again.")}finally{v(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec profile pricing",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsx)("div",{className:"col-xl-3",children:(0,a.jsx)(c.Z,{onLogout:w})}),(0,a.jsx)("div",{className:"col-xl-9",children:(0,a.jsx)("div",{className:"right-bar",children:h?(0,a.jsx)("div",{className:"d-flex justify-content-center align-items-center py-5",style:{height:"80vh"},children:(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status"})}):u?(0,a.jsx)("div",{className:"alert alert-danger",style:{height:"80vh"},children:u}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-5",children:[(0,a.jsxs)("div",{className:"icon-wrapper d-flex align-items-center gap-3",children:[(0,a.jsx)("button",{onClick:()=>e.back(),className:"icon btn btn-link p-0",children:(0,a.jsx)(i.default,{src:"/assets/img/button-angle.svg",width:10,height:15,alt:"Back",loading:"lazy"})}),(0,a.jsx)("span",{className:"fs-4 fw-semibold",children:"Subscription"})]}),0!==s.length?(0,a.jsx)("button",{onClick:()=>e.push("/subscription-list"),className:"btn btn-primary",children:"View Plans"}):(0,a.jsx)("div",{})]}),0===s.length?(0,a.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center text-center",style:{height:"70vh"},children:[(0,a.jsx)("h5",{className:"fw-semibold",children:"No Subscription Found"}),(0,a.jsx)("p",{className:"text-muted mb-4",children:"You don’t have any active or expired subscriptions yet."}),(0,a.jsx)("button",{onClick:()=>e.push("/subscription-list"),className:"btn btn-primary",children:"View Plans"})]}):(0,a.jsx)("div",{className:"pricing-sec p-0",children:(0,a.jsx)("div",{className:"row g-3",children:s.map(e=>{var s;return(0,a.jsxs)("div",{className:"col-lg-4 col-md-6 col-12",children:[(0,a.jsxs)("div",{className:"price-card",children:[(0,a.jsxs)("div",{className:"pricing-header mb-3",children:[(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,a.jsx)("span",{className:"title1",children:e.plan.plan_name}),"1"===e.is_active&&(0,a.jsx)("div",{className:"custom-btn bg-white shadow p-2 rounded-pill fs-14",children:"✅ Active"})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsxs)("span",{className:"price",children:["$",e.plan.price]}),(0,a.jsxs)("span",{className:"fs-14 text-muted",children:["/ ",e.plan.type]})]})]}),(0,a.jsx)("div",{className:"pricing-body",children:(0,a.jsx)("ul",{className:"m-0 p-0 list-with-icon",children:e.plan.features.map((e,s)=>(0,a.jsx)("li",{children:e.feature},s))})}),(0,a.jsx)("div",{className:"pricing-button mt-3",children:(0,a.jsx)("button",{className:"btn ".concat("active"===e.status?"btn-outline-danger":"btn-secondary"),disabled:"active"!==e.status,onClick:()=>{"active"===e.status&&(j(e),x(!0))},children:"active"===e.status?"Cancel Plan":"cancelled"===e.status?"Cancelled":"Expired"})}),(0,a.jsxs)("div",{className:"text-center fs-14 mt-3 mb-3 text-muted",children:[e.start_date," → ",e.end_date]})]}),(0,a.jsx)(d,{show:g,planName:null==p?void 0:null===(s=p.plan)||void 0===s?void 0:s.plan_name,onClose:()=>{x(!1),j(null)},onConfirm:y})]},e.id)})})})]})})})]})})})}),(0,a.jsx)(l.Z,{})]})}t(10471),t(76082),t(16260)},36037:function(e,s,t){"use strict";t.d(s,{Z:function(){return c}});var a=t(57437),i=t(87138),n=t(66648),l=t(2265);function c(){let[e,s]=(0,l.useState)("");return(0,a.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"footer-main",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,a.jsx)(i.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,a.jsx)(n.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,a.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Menu"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/subscription",children:"Free Trial"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/how-it-works",children:"How It Works"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Other"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/faq",children:"FAQs"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,a.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)(n.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,a.jsx)(i.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,a.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,a.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,a.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,a.jsx)(i.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}t(62562)},64955:function(e,s,t){"use strict";t.d(s,{Z:function(){return r}});var a=t(57437),i=t(66648),n=t(87138),l=t(16463);let c=[{href:"/affiliate/edit-profile",label:"Edit Profile",icon:"/assets/img/icons/user.svg"},{href:"/affiliate/change-password",label:"Change Password",icon:"/assets/img/icons/lock.svg"},{href:"/affiliate/saved-contractors",label:"Saved Contractors",icon:"/assets/img/icons/saved.svg"},{href:"/affiliate/my-subscription",label:"My Subscription",icon:"/assets/img/icons/subscription.svg"},{href:"/affiliate/transaction-history",label:"Transaction History",icon:"/assets/img/icons/transactions.svg"},{href:"/affiliate/saved-cards",label:"Saved Cards",icon:"/assets/img/icons/saved.svg"}];function r(e){let{onLogout:s}=e,t=(0,l.usePathname)();return(0,a.jsxs)("div",{className:"sidebar",children:[(0,a.jsx)("div",{className:"main-wrapper bg-dark m-0",children:(0,a.jsx)("div",{className:"buttons-wrapper",children:c.map(e=>(0,a.jsxs)(n.default,{href:e.href,className:"custom-btn ".concat(t===e.href?"active":""),children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(i.default,{src:e.icon,width:20,height:20,alt:"".concat(e.label," Icon"),loading:"lazy"}),(0,a.jsx)("span",{className:"text-white",children:e.label})]}),(0,a.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]},e.href))})}),(0,a.jsx)("div",{className:"bottom-bar",children:(0,a.jsx)("div",{className:"buttons-wrapper",children:(0,a.jsxs)("button",{onClick:s||(()=>{}),className:"custom-btn bg-danger",style:{borderColor:"#DC2626"},children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(i.default,{src:"/assets/img/icons/logout.svg",width:20,height:20,alt:"Logout Icon",loading:"lazy"}),(0,a.jsx)("span",{className:"text-white",children:"Logout"})]}),(0,a.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]})})})]})}},76082:function(){},16260:function(){},10471:function(){},62562:function(){},59742:function(){},5360:function(){}},function(e){e.O(0,[9412,8305,6628,4974,8148,2971,7023,1744],function(){return e(e.s=1820)}),_N_E=e.O()}]);