(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4441],{59816:function(e,a,t){Promise.resolve().then(t.bind(t,11796))},16463:function(e,a,t){"use strict";var s=t(71169);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}})},11796:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return m}});var s=t(57437),i=t(2265),l=t(66648),r=t(16463),n=t(18148),o=t(36037);t(5360);var c=t(64955);let d="/assets/img/profile-placeholder.webp";function m(){let[e,a]=(0,i.useState)(!0),[m,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[f,g]=(0,i.useState)(null),[x,b]=(0,i.useState)({}),[y,j]=(0,i.useState)(null),[v,N]=(0,i.useState)(!1),w=(0,i.useRef)(null),[k,_]=(0,i.useState)([]),[S,z]=(0,i.useState)(!0),P=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",t=document.createElement("div");t.innerHTML='\n            <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true" style="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 9999;\n                min-width: 300px;\n                background-color: '.concat("success"===a?"#d4edda":"#f8d7da",";\n                color: ").concat("success"===a?"#155724":"#721c24",";\n                border: 1px solid ").concat("success"===a?"#c3e6cb":"#f5c6cb",';\n                border-radius: 8px;\n                padding: 12px 20px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                font-weight: 500;\n            ">\n                <span>').concat("success"===a?"✅":"❌"," ").concat(e,'</span>\n                <button type="button" class="btn-close" style="font-size: 14px; margin-left: auto;" data-bs-dismiss="toast"></button>\n            </div>\n        '),document.body.appendChild(t);let s=setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},4e3),i=t.querySelector(".btn-close");null==i||i.addEventListener("click",()=>{clearTimeout(s),t.parentNode&&t.parentNode.removeChild(t)})},[C,F]=(0,i.useState)({name:"",phone:"",profile_image:d,company_name:"",license_number:"",zip:"",work_radius:"",category:"",address:"",city:"",state:"",email:""});(0,r.usePathname)();let E=(0,r.useRouter)(),I=async()=>{let e=localStorage.getItem("token");if(!e){E.push("/auth/login");return}try{let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/get-profile"),{headers:{Authorization:"Bearer ".concat(e)}}),t=await a.json();a.ok&&t.data&&F({name:t.data.name||"",phone:t.data.phone||"",profile_image:t.data.profile_image||d,company_name:t.data.company_name||"",license_number:t.data.license_number||"",zip:t.data.zip||"",work_radius:t.data.work_radius||0,category:t.data.specialization||"",address:t.data.address||"",city:t.data.city||"",state:t.data.state||"",email:t.data.email||""})}catch(e){console.error("Failed to refetch profile:",e),P("Failed to refresh profile data. Please try again.","error")}};(0,i.useEffect)(()=>{let e=localStorage.getItem("token");if(!e){E.push("/auth/login");return}(async()=>{try{let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/get-profile"),{headers:{Authorization:"Bearer ".concat(e)}}),t=await a.json();a.ok&&t.data&&F({name:t.data.name||"",phone:t.data.phone||"",profile_image:t.data.profile_image||d,company_name:t.data.company_name||"",license_number:t.data.license_number||"",zip:t.data.zip||"",work_radius:t.data.work_radius||0,category:t.data.specialization||"",address:t.data.address||"",city:t.data.city||"",state:t.data.state||"",email:t.data.email||""})}catch(e){console.error("Failed to load profile:",e),g("Failed to load profile data. Please try again.")}finally{a(!1)}})()},[E]),(0,i.useEffect)(()=>{(async()=>{try{var e;let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","data/specializations"),{headers:{Accept:"application/json"}});if(!a.ok)throw Error("HTTP ".concat(a.status));let t=await a.json(),s=[];Array.isArray(t)?s=t.map(e=>({id:String(e.id),name:e.name})):(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.specializations)&&Array.isArray(t.data.specializations)?s=t.data.specializations.map(e=>({id:String(e.id),name:e.name})):(null==t?void 0:t.data)&&Array.isArray(t.data)&&(s=t.data.map(e=>({id:String(e.id),name:e.name}))),_(s.length>0?s:[{id:"1",name:"Plumbing"},{id:"2",name:"Electric Work"},{id:"3",name:"Framing"},{id:"4",name:"Roofing"}])}catch(e){console.error("Failed to load categories:",e),_([{id:"1",name:"Plumbing"},{id:"2",name:"Electric Work"},{id:"3",name:"Framing"},{id:"4",name:"Roofing"}])}finally{z(!1)}})()},[]),(0,i.useEffect)(()=>{if(S)return;let e=t(40180);t(48704),t(56260);let a=e("#category-select");if(0!==a.length)return a.data("select2")&&a.select2("destroy"),a.select2({placeholder:"Select category",allowClear:!1,width:"100%"}).on("change",function(){let a=e(this).val();F(e=>({...e,category:a||""})),x.category&&b(e=>{let{category:a,...t}=e;return t})}),setTimeout(()=>{a.val(C.category).trigger("change")},0),()=>{a.data("select2")&&a.select2("destroy")}},[S,k]);let A=e=>{let{name:a,value:t}=e.target;F(e=>({...e,[a]:t}))},T=async e=>{var a;let t=null===(a=e.target.files)||void 0===a?void 0:a[0];if(!t)return;let s=localStorage.getItem("token");if(!s){P("Authentication required. Please log in.","error"),E.push("/auth/login");return}let i=new FormData;i.append("profile_image",t),p(!0);try{let e=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/profile/update-image"),{method:"POST",headers:{Authorization:"Bearer ".concat(s)},body:i}),a=await e.json();e.ok?(P("Profile image updated successfully!"),await I()):P(a.message||"Failed to upload image. Please try again.","error")}catch(e){console.error("Image upload error:",e),P("Network error. Please check your connection.","error")}finally{p(!1),w.current&&(w.current.value="")}},L=async e=>{if(e.preventDefault(),g(null),j(null),!C.name.trim()){P("Full Name is required.");return}if(!C.email.trim()){P("Email is required.");return}if(!C.phone.trim()){P("Phone Number is required.");return}let a=localStorage.getItem("token");if(!a){E.push("/auth/login");return}u(!0);try{let e;let t=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/update-profile"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},body:JSON.stringify({name:C.name,phone:C.phone,company_name:C.company_name,license_number:C.license_number,zip:C.zip,work_radius:C.work_radius,specialization:C.category,address:C.address,city:C.city,state:C.state})}),s=await t.text();try{e=s?JSON.parse(s):{}}catch(a){e={message:s||"Unknown error"}}t.ok?P("Profile updated successfully!"):P(e.message||"Failed to update profile. Please try again.","error")}catch(e){console.error("Update profile error:",e),P("Network error. Please check your connection.","error")}finally{u(!1)}},R=async()=>{N(!0);try{let e;let a=localStorage.getItem("token");if(!a){E.push("/auth/login");return}let t=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}),s=await t.text();try{e=s?JSON.parse(s):{}}catch(a){e={message:s}}t.ok?(localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("subscription"),E.push("/auth/login")):alert((null==e?void 0:e.message)||"Logout failed")}catch(e){console.error("Logout Error:",e),alert("Network error. Please try again.")}finally{N(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Z,{}),(0,s.jsx)("div",{className:"sections overflow-hidden",children:(0,s.jsx)("section",{className:"banner-sec profile position-static",children:(0,s.jsx)("div",{className:"container",children:(0,s.jsxs)("div",{className:"row g-4",children:[(0,s.jsx)("div",{className:"col-xl-3",children:(0,s.jsx)(c.Z,{onLogout:R})}),(0,s.jsx)("div",{className:"col-xl-9",children:e?(0,s.jsx)("div",{className:"right-bar d-flex align-items-center justify-content-center",style:{height:"500px"},children:(0,s.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,s.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,s.jsxs)("div",{className:"right-bar",children:[(0,s.jsx)("div",{className:"d-flex align-items-center gap-2 justify-content-between flex-wrap mb-5",children:(0,s.jsxs)("div",{className:"icon-wrapper d-flex align-items-center gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>E.back(),className:"icon","aria-label":"Go back",children:(0,s.jsx)(l.default,{src:"/assets/img/button-angle.svg",width:10,height:15,alt:"Back"})}),(0,s.jsx)("span",{className:"fs-4 fw-semibold",children:"Edit Profile"})]})}),f&&(0,s.jsx)("div",{className:"alert alert-danger mb-4",role:"alert",children:f}),y&&(0,s.jsx)("div",{className:"alert alert-success mb-4",role:"alert",children:y}),(0,s.jsxs)("div",{className:"image-wrapper-s1",children:[(0,s.jsx)(l.default,{src:C.profile_image,width:234,height:234,alt:"Worker Image",className:"d-block mb-4 img-fluid rounded-circle object-fit-cover",style:{width:"234px",height:"234px"}}),(0,s.jsx)("button",{type:"button",className:"icon",onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},disabled:h,"aria-label":"Upload profile image",children:(0,s.jsx)(l.default,{src:"/assets/img/camera-icon.svg",width:24,height:24,alt:"Camera Icon",style:{maxWidth:"24px"}})}),(0,s.jsx)("input",{type:"file",ref:w,accept:"image/*",onChange:T,style:{display:"none"}})]}),(0,s.jsxs)("form",{onSubmit:L,children:[(0,s.jsxs)("div",{className:"form",children:[(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsxs)("label",{htmlFor:"name",className:"mb-1 fw-semibold",children:["Full Name ",(0,s.jsx)("span",{className:"text-danger",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",className:"form-control",placeholder:"Jason Doe",value:C.name,onChange:A,required:!0})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsxs)("label",{htmlFor:"company_name",className:"mb-1 fw-semibold",children:["Company Name ",(0,s.jsx)("span",{className:"text-danger",children:"*"})]}),(0,s.jsx)("input",{type:"text",id:"company_name",name:"company_name",className:"form-control",placeholder:"Jason Tiles Limited",value:C.company_name,onChange:A,required:!0})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsxs)("label",{htmlFor:"email",className:"mb-1 fw-semibold",children:["Email Address ",(0,s.jsx)("span",{className:"text-danger",children:"*"})]}),(0,s.jsx)("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"hello@example.com",value:C.email,onChange:A,disabled:!0})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsxs)("label",{htmlFor:"phone",className:"mb-1 fw-semibold",children:["Phone Number ",(0,s.jsx)("span",{className:"text-danger",children:"*"})]}),(0,s.jsx)("input",{id:"phone",name:"phone",type:"tel",className:"form-control",placeholder:"(000) 000-0000",value:C.phone,onChange:A,required:!0})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsx)("label",{htmlFor:"address",className:"mb-1 fw-semibold",children:"Address"}),(0,s.jsx)("input",{type:"text",id:"address",name:"address",className:"form-control",placeholder:"abc street",value:C.address,onChange:A})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsx)("label",{htmlFor:"city",className:"mb-1 fw-semibold",children:"City"}),(0,s.jsx)("input",{type:"text",id:"city",name:"city",className:"form-control",placeholder:"New York",value:C.city,onChange:A})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsx)("label",{htmlFor:"state",className:"mb-1 fw-semibold",children:"State"}),(0,s.jsx)("input",{type:"text",id:"state",name:"state",className:"form-control",placeholder:"Texas",value:C.state,onChange:A})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsx)("label",{htmlFor:"zip",className:"mb-1 fw-semibold",children:"ZIP Code"}),(0,s.jsx)("input",{type:"text",id:"zip",name:"zip",className:"form-control",placeholder:"12345",value:C.zip,onChange:A})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsx)("label",{htmlFor:"license_number",className:"mb-1 fw-semibold",children:"License Number"}),(0,s.jsx)("input",{type:"text",id:"license_number",name:"license_number",className:"form-control",placeholder:"223546",value:C.license_number,onChange:A})]}),(0,s.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,s.jsx)("label",{htmlFor:"license_number",className:"mb-1 fw-semibold",children:"Work Radius"}),(0,s.jsx)("input",{type:"number",id:"work_radius",name:"work_radius",className:"form-control",placeholder:"223546",value:C.work_radius,onChange:A})]})]}),(0,s.jsx)("button",{type:"submit",disabled:m,className:"btn btn-primary rounded-3 mt-4",children:m?"Saving...":"Save Changes"})]})]})})]})})})}),(0,s.jsx)(o.Z,{})]})}},36037:function(e,a,t){"use strict";t.d(a,{Z:function(){return n}});var s=t(57437),i=t(87138),l=t(66648),r=t(2265);function n(){let[e,a]=(0,r.useState)("");return(0,s.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,s.jsxs)("div",{className:"container",children:[(0,s.jsx)("div",{className:"footer-main",children:(0,s.jsxs)("div",{className:"row g-3",children:[(0,s.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,s.jsx)(i.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,s.jsx)(l.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,s.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,s.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,s.jsx)("div",{className:"footer-title",children:"Menu"}),(0,s.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,s.jsx)("li",{children:(0,s.jsx)(i.default,{href:"/",children:"Home"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i.default,{href:"/subscription",children:"Free Trial"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i.default,{href:"/how-it-works",children:"How It Works"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,s.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,s.jsx)("div",{className:"footer-title",children:"Other"}),(0,s.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,s.jsx)("li",{children:(0,s.jsx)(i.default,{href:"/faq",children:"FAQs"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,s.jsx)("li",{children:(0,s.jsx)(i.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,s.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,s.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,s.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,s.jsx)("div",{className:"icon",children:(0,s.jsx)(l.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,s.jsx)(i.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,s.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,s.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,s.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,s.jsx)(i.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}t(62562)},64955:function(e,a,t){"use strict";t.d(a,{Z:function(){return o}});var s=t(57437),i=t(66648),l=t(87138),r=t(16463);let n=[{href:"/affiliate/edit-profile",label:"Edit Profile",icon:"/assets/img/icons/user.svg"},{href:"/affiliate/change-password",label:"Change Password",icon:"/assets/img/icons/lock.svg"},{href:"/affiliate/saved-contractors",label:"Saved Contractors",icon:"/assets/img/icons/saved.svg"},{href:"/affiliate/my-subscription",label:"My Subscription",icon:"/assets/img/icons/subscription.svg"},{href:"/affiliate/transaction-history",label:"Transaction History",icon:"/assets/img/icons/transactions.svg"},{href:"/affiliate/saved-cards",label:"Saved Cards",icon:"/assets/img/icons/saved.svg"}];function o(e){let{onLogout:a}=e,t=(0,r.usePathname)();return(0,s.jsxs)("div",{className:"sidebar",children:[(0,s.jsx)("div",{className:"main-wrapper bg-dark m-0",children:(0,s.jsx)("div",{className:"buttons-wrapper",children:n.map(e=>(0,s.jsxs)(l.default,{href:e.href,className:"custom-btn ".concat(t===e.href?"active":""),children:[(0,s.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,s.jsx)(i.default,{src:e.icon,width:20,height:20,alt:"".concat(e.label," Icon"),loading:"lazy"}),(0,s.jsx)("span",{className:"text-white",children:e.label})]}),(0,s.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]},e.href))})}),(0,s.jsx)("div",{className:"bottom-bar",children:(0,s.jsx)("div",{className:"buttons-wrapper",children:(0,s.jsxs)("button",{onClick:a||(()=>{}),className:"custom-btn bg-danger",style:{borderColor:"#DC2626"},children:[(0,s.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,s.jsx)(i.default,{src:"/assets/img/icons/logout.svg",width:20,height:20,alt:"Logout Icon",loading:"lazy"}),(0,s.jsx)("span",{className:"text-white",children:"Logout"})]}),(0,s.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]})})})]})}},56260:function(){},62562:function(){},5360:function(){}},function(e){e.O(0,[9412,8305,6628,2112,8038,4974,8704,8148,2971,7023,1744],function(){return e(e.s=59816)}),_N_E=e.O()}]);