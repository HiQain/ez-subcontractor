(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9843],{9706:function(e,t,s){Promise.resolve().then(s.bind(s,39233))},16463:function(e,t,s){"use strict";var a=s(71169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},39233:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(57437),i=s(66648),r=s(87138),n=s(2265),l=s(16463),o=s(18148),c=s(36037),d=s(64955);function m(){let e=(0,l.useRouter)(),[t,s]=(0,n.useState)([]),[m,h]=(0,n.useState)(!0),[u,f]=(0,n.useState)(null),[g,x]=(0,n.useState)(new Set),p=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",s=document.createElement("div");s.innerHTML='\n            <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true" style="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 9999;\n                min-width: 300px;\n                background-color: '.concat("success"===t?"#d4edda":"#f8d7da",";\n                color: ").concat("success"===t?"#155724":"#721c24",";\n                border: 1px solid ").concat("success"===t?"#c3e6cb":"#f5c6cb",';\n                border-radius: 8px;\n                padding: 12px 20px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                font-weight: 500;\n            ">\n                <span>').concat("success"===t?"✅":"❌"," ").concat(e,'</span>\n                <button type="button" class="btn-close" style="font-size: 14px; margin-left: auto;" data-bs-dismiss="toast"></button>\n            </div>\n        '),document.body.appendChild(s);let a=setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},4e3),i=s.querySelector(".btn-close");null==i||i.addEventListener("click",()=>{clearTimeout(a),s.parentNode&&s.parentNode.removeChild(s)})},v=async()=>{h(!0),f(null);try{let a=localStorage.getItem("token");if(!a){e.push("/auth/login");return}let i=await fetch("".concat("https://api.ezsubcontractor.com/api/","common/contractors/my-saved"),{headers:{Authorization:"Bearer ".concat(a),Accept:"application/json"}});if(401===i.status){localStorage.removeItem("token"),e.push("/auth/login");return}let r=await i.json();if(i.ok&&Array.isArray(null==r?void 0:r.data)){let e=r.data.map(e=>{var t,s,a,i,r;return{id:e.id,name:e.name||(null===(t=e.user)||void 0===t?void 0:t.name)||"",email:e.email||(null===(s=e.user)||void 0===s?void 0:s.email)||"",phone:e.phone||(null===(a=e.user)||void 0===a?void 0:a.phone)||"",company_name:e.company_name||(null===(i=e.user)||void 0===i?void 0:i.company_name)||"",zip:e.zip||"",work_radius:e.work_radius||"0",profile_image_url:e.profile_image_url||(null===(r=e.user)||void 0===r?void 0:r.profile_image_url)||null,average_rating:e.average_rating||"0",ratings_count:e.ratings_count||"0",role:e.role||"Contractor"}});s(e),x(new Set(e.map(e=>e.id)))}else{var t;throw Error((null===(t=r.message)||void 0===t?void 0:t[0])||"No saved contractors found.")}}catch(e){console.error("Fetch saved contractors error:",e),f(e.message||"Failed to load saved contractors.")}finally{h(!1)}},j=async t=>{let a=g.has(t),i=new FormData;i.append("contractor_id",t.toString());try{let r=localStorage.getItem("token");if(!r){e.push("/auth/login");return}if(!(await fetch("".concat("https://api.ezsubcontractor.com/api/").concat(a?"common/contractors/unsave":"common/contractors/save"),{method:"POST",headers:{Authorization:"Bearer ".concat(r),Accept:"application/json"},body:i})).ok)throw Error();let n=new Set(g);if(a)n.delete(t),s(e=>e.filter(e=>e.id!==t)),p("Contractor removed from saved list","success");else{n.add(t),await v();return}x(n)}catch(e){console.error("Toggle save error:",e),p("Failed to ".concat(a?"unsave":"save"," contractor."),"error")}};(0,n.useEffect)(()=>{v()},[]);let[b,w]=(0,n.useState)(!1),N=async()=>{w(!0);try{let t;let s=localStorage.getItem("token");if(!s){e.push("/auth/login");return}let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}}),i=await a.text();try{t=i?JSON.parse(i):{}}catch(e){t={message:i}}a.ok?(localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("subscription"),e.push("/auth/login")):alert((null==t?void 0:t.message)||"Logout failed")}catch(e){console.error("Logout Error:",e),alert("Network error. Please try again.")}finally{w(!1)}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.Z,{}),(0,a.jsx)("div",{className:"sections overflow-hidden",children:(0,a.jsx)("section",{className:"banner-sec profile filter-sec",children:(0,a.jsx)("div",{className:"container",children:(0,a.jsxs)("div",{className:"row g-4",children:[(0,a.jsx)("div",{className:"col-xl-3",children:(0,a.jsx)(d.Z,{onLogout:N})}),(0,a.jsx)("div",{className:"col-xl-9",children:(0,a.jsxs)("div",{className:"right-bar",children:[(0,a.jsx)("div",{className:"topbar d-flex align-items-center gap-2 justify-content-between flex-wrap mb-5",children:(0,a.jsxs)("div",{className:"icon-wrapper d-flex align-items-center gap-3",children:[(0,a.jsx)("button",{type:"button",className:"icon",onClick:()=>e.back(),"aria-label":"Go back",children:(0,a.jsx)(i.default,{src:"/assets/img/button-angle.svg",width:10,height:15,alt:"Back"})}),(0,a.jsx)("span",{className:"fs-4 fw-semibold",children:"Saved Contractors"})]})}),m?(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,a.jsx)("p",{className:"mt-2",children:"Loading saved contractors..."})]}):u?(0,a.jsxs)("div",{className:"alert alert-warning d-flex align-items-center",role:"alert",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi bi-exclamation-triangle-fill me-2",viewBox:"0 0 16 16",children:(0,a.jsx)("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})}),(0,a.jsx)("div",{children:u})]}):0===t.length?(0,a.jsxs)("div",{className:"text-center py-5",children:[(0,a.jsx)(i.default,{src:"/assets/img/post.webp",width:120,height:120,alt:"No saved contractors",className:"mb-3"}),(0,a.jsx)("p",{className:"text-muted",children:"You haven’t saved any contractors yet."}),(0,a.jsx)(r.default,{href:"/affiliate/dashboard",className:"btn btn-primary mt-3",children:"Browse Contractors"})]}):(0,a.jsx)("div",{className:"row g-3",children:t.map(t=>(0,a.jsx)("div",{className:"col-lg-4 col-md-6",children:(0,a.jsxs)("div",{className:"filter-card",children:[(0,a.jsx)("button",{className:"icon bg-white ".concat(g.has(t.id)?"saved":"save"),"aria-label":g.has(t.id)?"Remove from saved":"Save contractor",onClick:e=>{e.preventDefault(),e.stopPropagation(),j(t.id)},children:(0,a.jsx)(i.default,{src:g.has(t.id)?"/assets/img/bookmark-filled.svg":"/assets/img/bookmark-outline.svg",width:16,height:16,alt:"save"})}),(0,a.jsxs)("button",{className:"btn border-0 mx-auto d-block",onClick:s=>{s.preventDefault(),localStorage.setItem("selectedContractor",JSON.stringify(t)),e.push("/affiliate/contractor-details")},children:[(0,a.jsx)(i.default,{src:t.profile_image_url||"/assets/img/profile-placeholder.webp",width:104,height:104,className:"d-block mx-auto mb-3 rounded-circle",alt:"".concat(t.name,"'s Profile"),style:{objectFit:"cover"}}),(0,a.jsx)("div",{style:{color:"#333342"},className:"title text-black fw-semibold text-center fs-5 mb-2 text-capitalize",children:t.company_name||t.name})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:s=>{s.preventDefault(),localStorage.setItem("selectedContractor",JSON.stringify(t)),e.push("/affiliate/contractor-details")},className:"btn btn-primary py-2 px-4 mx-auto mb-3 shadow-none text-capitalize",children:t.role})}),(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-2 flex-wrap mb-2 flex-nowrap",children:[(0,a.jsx)(i.default,{src:"/assets/img/icons/message-dark.svg",width:20,height:20,alt:"Message Icon"}),(0,a.jsx)("a",{href:"mailto:".concat(t.email),className:"text-dark fw-medium text-truncate",children:t.email})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-2 flex-wrap mb-3",children:[(0,a.jsx)(i.default,{src:"/assets/img/icons/call-dark.svg",width:20,height:20,alt:"Call Icon"}),(0,a.jsx)("a",{href:"tel:".concat(t.phone),className:"text-dark fw-medium",children:t.phone})]}),(0,a.jsxs)("div",{className:"d-flex align-items-center justify-content-center gap-2 flex-wrap",children:[(0,a.jsx)(r.default,{href:"#",className:"icon",children:(0,a.jsx)(i.default,{src:"/assets/img/icons/Chat.svg",width:20,height:20,alt:"Icon"})}),(0,a.jsx)(r.default,{href:"mailto:".concat(t.email),className:"icon",children:(0,a.jsx)(i.default,{src:"/assets/img/icons/message-white.svg",width:20,height:20,alt:"Icon"})}),(0,a.jsx)(r.default,{href:"tel:".concat(t.phone),className:"icon",children:(0,a.jsx)(i.default,{src:"/assets/img/icons/call-white.svg",width:20,height:20,alt:"Icon"})})]})]})},t.id))})]})})]})})})}),(0,a.jsx)(c.Z,{})]})}s(5360),s(86689)},36037:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(57437),i=s(87138),r=s(66648),n=s(2265);function l(){let[e,t]=(0,n.useState)("");return(0,a.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,a.jsxs)("div",{className:"container",children:[(0,a.jsx)("div",{className:"footer-main",children:(0,a.jsxs)("div",{className:"row g-3",children:[(0,a.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,a.jsx)(i.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,a.jsx)(r.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,a.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Menu"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/",children:"Home"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/subscription",children:"Free Trial"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/how-it-works",children:"How It Works"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,a.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Other"}),(0,a.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/faq",children:"FAQs"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,a.jsx)("li",{children:(0,a.jsx)(i.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,a.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,a.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"icon",children:(0,a.jsx)(r.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,a.jsx)(i.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,a.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,a.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,a.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,a.jsx)(i.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}s(62562)},64955:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(57437),i=s(66648),r=s(87138),n=s(16463);let l=[{href:"/affiliate/edit-profile",label:"Edit Profile",icon:"/assets/img/icons/user.svg"},{href:"/affiliate/change-password",label:"Change Password",icon:"/assets/img/icons/lock.svg"},{href:"/affiliate/saved-contractors",label:"Saved Contractors",icon:"/assets/img/icons/saved.svg"},{href:"/affiliate/my-subscription",label:"My Subscription",icon:"/assets/img/icons/subscription.svg"},{href:"/affiliate/transaction-history",label:"Transaction History",icon:"/assets/img/icons/transactions.svg"},{href:"/affiliate/saved-cards",label:"Saved Cards",icon:"/assets/img/icons/saved.svg"}];function o(e){let{onLogout:t}=e,s=(0,n.usePathname)();return(0,a.jsxs)("div",{className:"sidebar",children:[(0,a.jsx)("div",{className:"main-wrapper bg-dark m-0",children:(0,a.jsx)("div",{className:"buttons-wrapper",children:l.map(e=>(0,a.jsxs)(r.default,{href:e.href,className:"custom-btn ".concat(s===e.href?"active":""),children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(i.default,{src:e.icon,width:20,height:20,alt:"".concat(e.label," Icon"),loading:"lazy"}),(0,a.jsx)("span",{className:"text-white",children:e.label})]}),(0,a.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]},e.href))})}),(0,a.jsx)("div",{className:"bottom-bar",children:(0,a.jsx)("div",{className:"buttons-wrapper",children:(0,a.jsxs)("button",{onClick:t||(()=>{}),className:"custom-btn bg-danger",style:{borderColor:"#DC2626"},children:[(0,a.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,a.jsx)(i.default,{src:"/assets/img/icons/logout.svg",width:20,height:20,alt:"Logout Icon",loading:"lazy"}),(0,a.jsx)("span",{className:"text-white",children:"Logout"})]}),(0,a.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]})})})]})}},62562:function(){},86689:function(){},5360:function(){}},function(e){e.O(0,[9412,8305,6628,4974,8148,2971,7023,1744],function(){return e(e.s=9706)}),_N_E=e.O()}]);