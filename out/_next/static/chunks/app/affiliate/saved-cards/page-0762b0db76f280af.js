(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6898],{53249:function(e,s,a){Promise.resolve().then(a.bind(a,61502))},16463:function(e,s,a){"use strict";var t=a(71169);a.o(t,"useParams")&&a.d(s,{useParams:function(){return t.useParams}}),a.o(t,"usePathname")&&a.d(s,{usePathname:function(){return t.usePathname}}),a.o(t,"useRouter")&&a.d(s,{useRouter:function(){return t.useRouter}})},61502:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return h}});var t=a(57437),i=a(87138),r=a(66648),l=a(16463),n=a(18148),c=a(36037),o=a(64955);a(5360);var d=a(2265);function h(){let e=(0,l.useRouter)(),[s,a]=(0,d.useState)(!1),[h,m]=(0,d.useState)(!0),[u,f]=(0,d.useState)([]),[g,x]=(0,d.useState)(null),p=async()=>{m(!0),x(null);try{let s=localStorage.getItem("token");if(!s){e.push("/auth/login");return}let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","affiliate/cards"),{headers:{Authorization:"Bearer ".concat(s),Accept:"application/json"}});if(401===a.status){localStorage.removeItem("token"),e.push("/auth/login");return}let t=await a.json();if(t.success&&Array.isArray(t.data)){let e=t.data.map(e=>{var s,a,t,i,r;return{id:e.id||e.payment_method_id,last4:(null===(s=e.card)||void 0===s?void 0:s.last4)||e.last4||"****",exp_month:(null===(a=e.card)||void 0===a?void 0:a.exp_month)||e.exp_month||1,exp_year:(null===(t=e.card)||void 0===t?void 0:t.exp_year)||e.exp_year||2025,brand:((null===(i=e.card)||void 0===i?void 0:i.brand)||e.brand||"unknown").toLowerCase(),name:(null===(r=e.billing_details)||void 0===r?void 0:r.name)||e.name||"â€”",is_default:e.is_default||e.default||!1}});f(e)}else throw Error(t.message||"Failed to load cards")}catch(e){console.error("Fetch cards error:",e),x(e.message||"Failed to load saved cards. Please try again.")}finally{m(!1)}},v=async s=>{try{let a=localStorage.getItem("token");if(!a){e.push("/auth/login");return}let t=await fetch("".concat("https://api.ezsubcontractor.com/api/","affiliate/cards/set-default"),{method:"POST",headers:{Authorization:"Bearer ".concat(a),"Content-Type":"application/json"},body:JSON.stringify({card_id:s})}),i=await t.json();if(t.ok&&i.success)f(e=>e.map(e=>e.id===s?{...e,is_default:!0}:{...e,is_default:!1}));else throw Error(i.message||"Failed to set default card")}catch(e){console.error("Set default card error:",e),alert(e.message||"Failed to set default card."),p()}},j=async()=>{a(!0);try{let s;let a=localStorage.getItem("token");if(!a){e.push("/auth/login");return}let t=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/logout"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}}),i=await t.text();try{s=i?JSON.parse(i):{}}catch(e){s={message:i}}t.ok?(localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userEmail"),localStorage.removeItem("token"),localStorage.removeItem("subscription"),e.push("/auth/login")):alert((null==s?void 0:s.message)||"Logout failed")}catch(e){console.error("Logout Error:",e),alert("Network error. Please try again.")}finally{a(!1)}};(0,d.useEffect)(()=>{p()},[]);let b=e=>{switch(e){case"visa":return"/assets/img/icons/visa-icon.svg";case"mastercard":return"/assets/img/icons/mastercard-icon.svg";case"amex":return"/assets/img/icons/amex-icon.svg";case"discover":return"/assets/img/icons/discover-icon.svg";default:return"/assets/img/icons/card-generic.svg"}};return(0,t.jsxs)("div",{className:"sections overflow-hidden",children:[(0,t.jsx)(n.Z,{}),(0,t.jsx)("section",{className:"banner-sec profile",children:(0,t.jsx)("div",{className:"container",children:(0,t.jsxs)("div",{className:"row g-4",children:[(0,t.jsx)("div",{className:"col-xl-3",children:(0,t.jsx)(o.Z,{onLogout:j})}),(0,t.jsx)("div",{className:"col-xl-9",children:(0,t.jsxs)("div",{className:"right-bar",children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-3 justify-content-between flex-wrap mb-5",children:[(0,t.jsxs)("div",{className:"icon-wrapper d-flex align-items-center gap-3",children:[(0,t.jsx)("button",{type:"button",className:"icon",onClick:()=>e.back(),"aria-label":"Go back",children:(0,t.jsx)(r.default,{src:"/assets/img/button-angle.svg",width:10,height:15,alt:"Back",loading:"lazy"})}),(0,t.jsx)("span",{className:"fs-4 fw-semibold",children:"Saved Cards"})]}),(0,t.jsx)("button",{className:"btn btn-primary rounded-3",disabled:!0,children:"Save Changes"})]}),h?(0,t.jsxs)("div",{className:"text-center py-5",children:[(0,t.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,t.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,t.jsx)("p",{className:"mt-2",children:"Loading saved cards..."})]}):g?(0,t.jsx)("div",{className:"alert alert-danger",role:"alert",children:g}):0===u.length?(0,t.jsxs)("div",{className:"text-center py-5",children:[(0,t.jsx)(r.default,{src:"/assets/img/post.webp",width:120,height:120,alt:"No cards",className:"mb-3"}),(0,t.jsx)("p",{className:"text-muted",children:"No saved cards found."}),(0,t.jsx)(i.default,{href:"/affiliate/add-card",className:"btn btn-primary mt-3",children:"Add a Card"})]}):(0,t.jsx)("div",{className:"row g-3",children:u.map(e=>(0,t.jsx)("div",{className:"col-xl-6",children:(0,t.jsxs)("div",{className:"credit-card mb-2 position-relative px-4",children:[(0,t.jsx)("div",{className:"checkbox-wrapper",children:(0,t.jsx)("input",{type:"checkbox",className:"checkbox checkbox1",checked:e.is_default,onChange:()=>v(e.id),"aria-label":"Set ".concat(e.last4," as default")})}),(0,t.jsxs)("div",{className:"numbers fs-4 fw-semibold mb-4",children:["**** **** **** ",e.last4]}),(0,t.jsxs)("div",{className:"content-wrapper d-flex align-items-center gap-2 flex-wrap justify-content-between",children:[(0,t.jsxs)("div",{className:"left d-flex align-items-center gap-4 flex-wrap",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"fs-12 mb-1",children:"Card Holder Name"}),(0,t.jsx)("div",{className:"fs-14 fw-semibold",children:e.name})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"fs-12 mb-1",children:"Expiry Date"}),(0,t.jsxs)("div",{className:"fs-14 fw-semibold",children:[String(e.exp_month).padStart(2,"0"),"/",e.exp_year]})]})]}),(0,t.jsx)("div",{className:"icon",children:(0,t.jsx)(r.default,{src:b(e.brand),width:28,height:9,alt:"".concat(e.brand," icon"),loading:"lazy"})})]})]})},e.id))})]})})]})})}),(0,t.jsx)(c.Z,{})]})}},36037:function(e,s,a){"use strict";a.d(s,{Z:function(){return n}});var t=a(57437),i=a(87138),r=a(66648),l=a(2265);function n(){let[e,s]=(0,l.useState)("");return(0,t.jsx)("footer",{className:"footer",style:{backgroundImage:"url('/assets/img/footer-bg.webp')",backgroundSize:"cover",backgroundPosition:"center"},children:(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("div",{className:"footer-main",children:(0,t.jsxs)("div",{className:"row g-3",children:[(0,t.jsxs)("div",{className:"col-lg-4 col-sm-6",children:[(0,t.jsx)(i.default,{href:"/",className:"footer-logo d-flex justify-content-center mb-4",style:{width:"fit-content"},"aria-label":"Home",children:(0,t.jsx)(r.default,{src:"/assets/img/icons/footer-logo.webp",width:175,height:49,alt:"EZ Subcontractor Logo",loading:"lazy"})}),(0,t.jsx)("p",{className:"text-white",children:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text."})]}),(0,t.jsxs)("div",{className:"col-6 col-lg-2 offset-lg-1 col-sm-6",children:[(0,t.jsx)("div",{className:"footer-title",children:"Menu"}),(0,t.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i.default,{href:"/",children:"Home"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i.default,{href:"/subscription",children:"Free Trial"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i.default,{href:"/how-it-works",children:"How It Works"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i.default,{href:"/blogs",children:"Blogs"})})]})]}),(0,t.jsxs)("div",{className:"col-6 col-lg-2 col-sm-6",children:[(0,t.jsx)("div",{className:"footer-title",children:"Other"}),(0,t.jsxs)("ul",{className:"footer-links m-0 p-0",children:[(0,t.jsx)("li",{children:(0,t.jsx)(i.default,{href:"/faq",children:"FAQs"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i.default,{href:"/terms-and-conditions",children:"Terms & Conditions"})}),(0,t.jsx)("li",{children:(0,t.jsx)(i.default,{href:"/privacy-policy",children:"Privacy Policy"})})]})]}),(0,t.jsxs)("div",{className:"col-lg-3 col-sm-6",children:[(0,t.jsx)("div",{className:"footer-title",children:"Reach Us:"}),(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2 mb-3",children:[(0,t.jsx)("div",{className:"icon",children:(0,t.jsx)(r.default,{src:"/assets/img/icons/message-green.svg",width:15,height:15,alt:"Email",loading:"lazy"})}),(0,t.jsx)(i.default,{href:"mailto:info@ezsubcontractor.com",className:"text-decoration-none",style:{color:"#E6EE9D"},children:"info@ezsubcontractor.com"})]})]})]})}),(0,t.jsxs)("div",{className:"footer-bottom pt-3 d-flex align-items-center justify-content-between flex-wrap gap-2",children:[(0,t.jsxs)("div",{className:"left text-white fw-medium",children:["\xa9 ",new Date().getFullYear()," EZ Subcontractor. All Rights Reserved"]}),(0,t.jsxs)("div",{className:"right text-white fw-medium",children:["Developed By:"," ",(0,t.jsx)(i.default,{href:"https://designspartans.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary fw-semibold text-decoration-underline",children:"Design Spartans"})]})]})]})})}a(62562)},64955:function(e,s,a){"use strict";a.d(s,{Z:function(){return c}});var t=a(57437),i=a(66648),r=a(87138),l=a(16463);let n=[{href:"/affiliate/edit-profile",label:"Edit Profile",icon:"/assets/img/icons/user.svg"},{href:"/affiliate/change-password",label:"Change Password",icon:"/assets/img/icons/lock.svg"},{href:"/affiliate/saved-contractors",label:"Saved Contractors",icon:"/assets/img/icons/saved.svg"},{href:"/affiliate/my-subscription",label:"My Subscription",icon:"/assets/img/icons/subscription.svg"},{href:"/affiliate/transaction-history",label:"Transaction History",icon:"/assets/img/icons/transactions.svg"},{href:"/affiliate/saved-cards",label:"Saved Cards",icon:"/assets/img/icons/saved.svg"}];function c(e){let{onLogout:s}=e,a=(0,l.usePathname)();return(0,t.jsxs)("div",{className:"sidebar",children:[(0,t.jsx)("div",{className:"main-wrapper bg-dark m-0",children:(0,t.jsx)("div",{className:"buttons-wrapper",children:n.map(e=>(0,t.jsxs)(r.default,{href:e.href,className:"custom-btn ".concat(a===e.href?"active":""),children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,t.jsx)(i.default,{src:e.icon,width:20,height:20,alt:"".concat(e.label," Icon"),loading:"lazy"}),(0,t.jsx)("span",{className:"text-white",children:e.label})]}),(0,t.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]},e.href))})}),(0,t.jsx)("div",{className:"bottom-bar",children:(0,t.jsx)("div",{className:"buttons-wrapper",children:(0,t.jsxs)("button",{onClick:s||(()=>{}),className:"custom-btn bg-danger",style:{borderColor:"#DC2626"},children:[(0,t.jsxs)("div",{className:"d-flex align-items-center gap-2",children:[(0,t.jsx)(i.default,{src:"/assets/img/icons/logout.svg",width:20,height:20,alt:"Logout Icon",loading:"lazy"}),(0,t.jsx)("span",{className:"text-white",children:"Logout"})]}),(0,t.jsx)(i.default,{src:"/assets/img/icons/angle-right.svg",width:15,height:9,alt:"Arrow",style:{objectFit:"contain"},loading:"lazy"})]})})})]})}},62562:function(){},5360:function(){}},function(e){e.O(0,[9412,8305,6628,4974,8148,2971,7023,1744],function(){return e(e.s=53249)}),_N_E=e.O()}]);