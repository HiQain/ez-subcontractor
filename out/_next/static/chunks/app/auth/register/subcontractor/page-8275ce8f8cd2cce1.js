(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{96483:function(e,a,s){Promise.resolve().then(s.bind(s,43841))},16463:function(e,a,s){"use strict";var t=s(71169);s.o(t,"useParams")&&s.d(a,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},43841:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return d}});var t=s(57437);s(98135);var n=s(2265),i=s(40180),r=s.n(i),o=s(87138),l=s(66648),c=s(16463);function d(){let e=(0,c.useRouter)(),a=(0,c.useParams)().type||"subcontractor",[i,d]=(0,n.useState)({name:"John Doe",email:"johndoe@gmail.com",phone:"(342) 432-4324",company_name:"ABC Corporation",password:"Password123!",password_confirmation:"Password123!",license_number:"LC22442",zip:"10000",work_radius:"5",category:"1"}),[m,p]=(0,n.useState)(1),[u,h]=(0,n.useState)(!1),[x,g]=(0,n.useState)(!1),[b,f]=(0,n.useState)({}),[w,j]=(0,n.useState)(!1),[N,y]=(0,n.useState)(!1),[v,_]=(0,n.useState)([]),[k,C]=(0,n.useState)(!0),P=e=>{let{active:a}=e;return(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"eye-icon ".concat(a?"active":""),children:[(0,t.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,t.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,t.jsx)("line",{className:"slash",x1:"2",y1:"2",x2:"22",y2:"22",style:{stroke:a?"none":"currentColor"}})]})},S=e=>{let a=e.replace(/\D/g,"").slice(0,10);return 0===a.length?"":a.length<4?"(".concat(a):a.length<7?"(".concat(a.slice(0,3),") ").concat(a.slice(3)):"(".concat(a.slice(0,3),") ").concat(a.slice(3,6),"-").concat(a.slice(6,10))},F=e=>{let{name:a,value:s}=e.target,t=s;"phone"===a&&(t=S(s)),d(e=>({...e,[a]:t})),b[a]&&f(e=>{let{[a]:s,...t}=e;return t})},z=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error",s=document.querySelector(".spartans-toast");s&&s.remove();let t=document.createElement("div");t.className="spartans-toast",t.innerHTML='\n            <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true" style="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 9999;\n                min-width: 300px;\n                max-width: 400px;\n                background-color: '.concat("success"===a?"#d4edda":"#f8d7da",";\n                color: ").concat("success"===a?"#155724":"#721c24",";\n                border: 1px solid ").concat("success"===a?"#c3e6cb":"#f5c6cb",';\n                border-radius: 8px;\n                padding: 12px 20px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                font-weight: 500;\n                font-size: 14px;\n            ">\n                <span>').concat("success"===a?"✅":"❌"," ").concat(e,'</span>\n                <button type="button" class="btn-close" style="font-size: 12px; margin-left: auto; opacity: 0.7;" data-bs-dismiss="toast"></button>\n            </div>\n        '),document.body.appendChild(t),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},4e3)};(0,n.useEffect)(()=>{(async()=>{try{var e;let a=await fetch("".concat("https://api.ezsubcontractor.com/api/","data/specializations"),{headers:{Accept:"application/json"}});if(!a.ok)throw Error("HTTP ".concat(a.status));let s=await a.json(),t=[];Array.isArray(s)?t=s.map(e=>({id:String(e.id),name:e.name})):(null==s?void 0:null===(e=s.data)||void 0===e?void 0:e.specializations)&&Array.isArray(s.data.specializations)?t=s.data.specializations.map(e=>({id:String(e.id),name:e.name})):(null==s?void 0:s.data)&&Array.isArray(s.data)&&(t=s.data.map(e=>({id:String(e.id),name:e.name}))),_(t.length>0?t:[{id:"1",name:"Plumbing"},{id:"2",name:"Electric Work"},{id:"3",name:"Framing"},{id:"4",name:"Roofing"}])}catch(e){console.error("Failed to load categories:",e),_([{id:"1",name:"Plumbing"},{id:"2",name:"Electric Work"},{id:"3",name:"Framing"},{id:"4",name:"Roofing"}])}finally{C(!1)}})()},[]),(0,n.useEffect)(()=>{2===m&&["general-contractor","sub-contractor"].includes(a)&&!k&&s.e(8704).then(s.t.bind(s,48704,23)).then(()=>{s(56260);let e=r()("#category-select");if(0!==e.length)return e.data("select2")&&e.select2("destroy"),e.select2({placeholder:"Select category",allowClear:!1,width:"100%"}).on("change",function(){let e=r()(this).val();d(a=>({...a,category:e||"1"})),b.category&&f(e=>{let{category:a,...s}=e;return s})}),()=>{e.data("select2")&&e.select2("destroy")}})},[m,k,v,a]);let R=async s=>{s.preventDefault(),y(!0),f({});let t={};if(i.name.trim()||(t.name="Full Name is required"),i.email.trim()?/\S+@\S+\.\S+/.test(i.email)||(t.email="Email is invalid"):t.email="Email is required",i.phone.trim()||(t.phone="Phone Number is required"),i.password.trim()?i.password.length<6&&(t.password="Password must be at least 6 characters"):t.password="Password is required",i.password_confirmation.trim()?i.password!==i.password_confirmation&&(t.password_confirmation="Passwords do not match"):t.password_confirmation="Confirm Password is required",w||(t.agreement="You must agree to the terms and conditions"),["general-contractor","sub-contractor"].includes(a)&&(i.category||(t.category="Please select a category"),i.license_number.trim()||(t.license_number="License Number is required")),i.zip.trim()||(t.zip="Zip Code is required"),i.work_radius.trim()||(t.work_radius="Work Radius is required"),Object.keys(t).length>0){f(t),z(Object.values(t)[0],"error"),y(!1);return}localStorage.getItem("role")||a.replace("-","_");let n={name:i.name,email:i.email,phone:i.phone,company_name:i.company_name,password:i.password,password_confirmation:i.password_confirmation,license_number:i.license_number,zip:i.zip,work_radius:parseInt(i.work_radius)||0,category:parseInt(i.category)||1,role:"subcontractor"};try{let s=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/register"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)}),t=await s.json();if(s.ok){var r;let s=null===(r=t.data)||void 0===r?void 0:r.token;s&&(localStorage.setItem("token",s),localStorage.setItem("role","subcontractor")),z("Registration successful! Redirecting...","success"),setTimeout(()=>{e.push({"general-contractor":"/subscription-list",subcontractor:"/subscription-list",affiliate:"/affiliate/dashboard"}[a]||"/")},1500)}else{let e=Array.isArray(t.message)?t.message[0]:t.message||"Registration failed. Please try again.";f({api:e}),z(e,"error")}}catch(a){console.error("Network error:",a);let e="Network error. Please check your connection.";f({api:e}),z(e,"error")}finally{y(!1)}},q={"general-contractor":{title:"General Contractor",icon:"/assets/img/icons/construction-worker.webp"},"sub-contractor":{title:"Subcontractor",icon:"/assets/img/icons/settings.svg"},affiliate:{title:"Affiliate",icon:"/assets/img/icons/portfolio.webp"}}[a]||{title:"Subcontractor",icon:"/assets/img/icons/settings.svg"};return(0,t.jsxs)("section",{className:"hero-sec login overflow-hidden position-static",children:[(0,t.jsxs)("div",{className:"image-wrapper",children:[(0,t.jsx)(l.default,{src:"/assets/img/left-image.webp",className:"left-image",alt:"Section Image",width:500,height:800}),(0,t.jsxs)("p",{className:"main-title mb-0",children:["Developed by:",(0,t.jsxs)(o.default,{href:"https://designspartans.com/",target:"_blank",className:"text-primary fw-semibold",children:[" ","Design Spartans"]})]})]}),(0,t.jsx)("div",{className:"row",children:(0,t.jsx)("div",{className:"col-lg-6 offset-lg-6",children:(0,t.jsx)("div",{className:"content-wrapper d-flex align-items-center justify-content-center",style:{padding:"20px"},children:(0,t.jsxs)("div",{className:"content w-100 mx-auto",style:{maxWidth:"482px",position:"relative",minHeight:"600px"},children:[(0,t.jsx)(o.default,{href:"/",className:"d-block mb-4",children:(0,t.jsx)(l.default,{src:"/assets/img/icons/logo.webp",width:350,height:100,alt:"Logo",className:"img-fluid d-block w-100 mx-auto",style:{maxWidth:"350px"}})}),(0,t.jsx)("form",{className:"form",onSubmit:R,children:(0,t.jsxs)("div",{style:{position:"relative",overflow:"hidden"},children:[1===m&&(0,t.jsxs)("div",{className:"step-one animate__animated animate__fadeIn",children:[(0,t.jsx)("div",{className:"fw-semibold fs-2 mb-4 text-center",children:"Register"}),(0,t.jsxs)("div",{className:"register-topbar px-4 gap-3 mb-3",children:[(0,t.jsx)(l.default,{src:q.icon,width:50,height:50,alt:q.title}),(0,t.jsx)("div",{className:"fw-semibold",children:q.title})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column mb-3",children:[(0,t.jsxs)("label",{htmlFor:"name",className:"mb-1 fw-semibold",children:["Full Name ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"text",id:"name",name:"name",placeholder:"John Doe",value:i.name,onChange:F,className:"form-control",disabled:N}),b.name&&(0,t.jsx)("span",{className:"text-danger animate-slide-up",children:b.name})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column mb-3",children:[(0,t.jsx)("label",{htmlFor:"company_name",className:"mb-1 fw-semibold",children:"Company Name"}),(0,t.jsx)("input",{type:"text",id:"company_name",name:"company_name",placeholder:"JD Construction",value:i.company_name,onChange:F,className:"form-control",disabled:N})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column mb-3",children:[(0,t.jsxs)("label",{htmlFor:"email",className:"mb-1 fw-semibold",children:["Email Address ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"email",id:"email",name:"email",placeholder:"john@example.com",value:i.email,onChange:F,className:"form-control",disabled:N}),b.email&&(0,t.jsx)("span",{className:"text-danger animate-slide-up",children:b.email})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column mb-3",children:[(0,t.jsxs)("label",{htmlFor:"phone",className:"mb-1 fw-semibold",children:["Phone Number ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:"tel",id:"phone",name:"phone",className:"form-control",placeholder:"(555) 123-4567",value:i.phone,onChange:F,maxLength:14,disabled:N}),b.phone&&(0,t.jsx)("span",{className:"text-danger animate-slide-up",children:b.phone})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column position-relative mb-3",children:[(0,t.jsxs)("label",{htmlFor:"password",className:"mb-1 fw-semibold",children:["Password ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:u?"text":"password",id:"password",name:"password",className:"form-control pe-5",placeholder:"Password123",value:i.password,onChange:F,disabled:N}),(0,t.jsx)("span",{className:"toggle-password position-absolute",style:{right:"10px",top:"38px",cursor:"pointer"},onClick:()=>h(!u),children:(0,t.jsx)(P,{active:u})}),b.password&&(0,t.jsx)("span",{className:"text-danger animate-slide-up",children:b.password})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column position-relative mb-3",children:[(0,t.jsxs)("label",{htmlFor:"password_confirmation",className:"mb-1 fw-semibold",children:["Confirm Password ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsx)("input",{type:x?"text":"password",id:"password_confirmation",name:"password_confirmation",className:"form-control pe-5",placeholder:"Password123",value:i.password_confirmation,onChange:F,disabled:N}),(0,t.jsx)("span",{className:"toggle-password position-absolute",style:{right:"10px",top:"38px",cursor:"pointer"},onClick:()=>g(!x),children:(0,t.jsx)(P,{active:x})}),b.password_confirmation&&(0,t.jsx)("span",{className:"text-danger animate-slide-up",children:b.password_confirmation})]}),(0,t.jsxs)("div",{className:"form-check mb-3",children:[(0,t.jsx)("input",{className:"form-check-input",type:"checkbox",id:"agreement",checked:w,onChange:e=>{j(e.target.checked),b.agreement&&f(e=>{let{agreement:a,...s}=e;return s})},disabled:N}),(0,t.jsxs)("label",{className:"form-check-label fs-12",htmlFor:"agreement",children:["By registering, you confirm that you have reviewed and accepted our"," ",(0,t.jsx)(o.default,{href:"/privacy-policy",style:{color:"#8F9B1F"},children:"Privacy Policy"})," and"," ",(0,t.jsx)(o.default,{href:"/terms-and-conditions",style:{color:"#8F9B1F"},children:"Terms & Conditions."})]}),b.agreement&&(0,t.jsx)("span",{className:"text-danger animate-slide-up d-block mt-1",children:b.agreement})]}),b.api&&(0,t.jsx)("p",{className:"text-danger animate-slide-up mb-3",children:b.api}),(0,t.jsx)("button",{type:"button",onClick:()=>{let e={};if(i.name.trim()||(e.name="Full Name is required"),i.email.trim()?/\S+@\S+\.\S+/.test(i.email)||(e.email="Email is invalid"):e.email="Email is required",i.phone.trim()||(e.phone="Phone Number is required"),i.password.trim()?i.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",i.password_confirmation.trim()?i.password!==i.password_confirmation&&(e.password_confirmation="Passwords do not match"):e.password_confirmation="Confirm Password is required",w||(e.agreement="You must agree to the terms and conditions"),Object.keys(e).length>0){f(e),z(Object.values(e)[0],"error");return}p(2)},disabled:N,className:"btn btn-primary w-100 rounded-3 d-block mb-2",children:"Next"}),(0,t.jsxs)("div",{className:"text-center fw-medium text-gray-light mt-3",children:["Already have an account?"," ",(0,t.jsx)(o.default,{href:"/auth/login",className:"fw-semibold text-black",children:"Login"})]})]}),2===m&&["general-contractor","subcontractor"].includes(a)&&(0,t.jsxs)("div",{className:"step-two animate__animated animate__fadeIn",children:[(0,t.jsx)("div",{className:"fw-semibold fs-2 mb-4 text-center",children:"Business Details"}),(0,t.jsxs)("div",{className:"register-topbar justify-content-start mb-3 d-flex align-items-center gap-2",children:[(0,t.jsx)(l.default,{src:q.icon,width:50,height:50,alt:q.title}),(0,t.jsx)("div",{className:"fw-semibold",children:q.title})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column mb-3",children:[(0,t.jsxs)("label",{htmlFor:"category",className:"mb-1 fw-semibold",children:["Category ",(0,t.jsx)("span",{className:"text-danger",children:"*"})]}),(0,t.jsxs)("select",{id:"category-select",className:"form-control",value:i.category,disabled:k||N,children:[(0,t.jsx)("option",{value:"",children:"Select category"}),v.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]}),b.category&&(0,t.jsx)("span",{className:"text-danger animate-slide-up",children:b.category})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column mb-3",children:[(0,t.jsx)("label",{htmlFor:"license_number",className:"mb-1 fw-semibold",children:"License Number"}),(0,t.jsx)("input",{type:"text",id:"license_number",name:"license_number",placeholder:"LIC123456",value:i.license_number,onChange:F,className:"form-control",disabled:N})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column mb-3",children:[(0,t.jsx)("label",{htmlFor:"zip",className:"mb-1 fw-semibold",children:"Zip Code"}),(0,t.jsx)("input",{type:"text",id:"zip",name:"zip",placeholder:"12345",value:i.zip,onChange:F,className:"form-control",disabled:N})]}),(0,t.jsxs)("div",{className:"input-wrapper d-flex flex-column mb-3",children:[(0,t.jsx)("label",{htmlFor:"work_radius",className:"mb-1 fw-semibold",children:"Work Radius (miles)"}),(0,t.jsx)("input",{type:"number",id:"work_radius",name:"work_radius",placeholder:"25",value:i.work_radius,onChange:F,className:"form-control",disabled:N})]}),b.api&&(0,t.jsx)("p",{className:"text-danger animate-slide-up mb-3",children:b.api}),(0,t.jsxs)("div",{className:"row",children:[(0,t.jsx)("div",{className:"col-lg-4",children:(0,t.jsx)("button",{onClick:()=>p(1),type:"button",className:"btn btn-outline-dark rounded-3 text-center d-block",disabled:N,children:"Back"})}),(0,t.jsx)("div",{className:"col-lg-8",children:(0,t.jsx)("button",{type:"submit",className:"btn btn-primary w-100 rounded-3 text-center d-block",disabled:N,children:N?"Registering...":"Complete Registration"})})]})]}),"affiliate"===a&&1===m&&(0,t.jsxs)(t.Fragment,{children:[b.api&&(0,t.jsx)("p",{className:"text-danger animate-slide-up mb-3",children:b.api}),(0,t.jsx)("button",{type:"submit",className:"btn btn-primary w-100 rounded-3 d-block mt-3",disabled:N,children:N?"Registering...":"Complete Registration"})]})]})})]})})})})]})}},56260:function(){},98135:function(){}},function(e){e.O(0,[2112,8038,4974,2971,7023,1744],function(){return e(e.s=96483)}),_N_E=e.O()}]);