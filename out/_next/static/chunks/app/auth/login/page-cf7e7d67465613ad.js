(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6716],{59029:function(e,t,s){Promise.resolve().then(s.bind(s,54871))},16463:function(e,t,s){"use strict";var a=s(71169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},54871:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var a=s(57437);s(98135);var r=s(2265),n=s(87138),o=s(66648),i=s(16463);function l(){let[e,t]=(0,r.useState)("johndoe@gmail.com"),[s,l]=(0,r.useState)("Password123!"),[c,d]=(0,r.useState)(!1),[m,u]=(0,r.useState)(!1),[h,p]=(0,r.useState)(""),[x,f]=(0,r.useState)(!1),g=(0,i.useRouter)(),b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",s=document.createElement("div");s.innerHTML='\n            <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true" style="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 9999;\n                min-width: 300px;\n                background-color: '.concat("success"===t?"#d4edda":"#f8d7da",";\n                color: ").concat("success"===t?"#155724":"#721c24",";\n                border: 1px solid ").concat("success"===t?"#c3e6cb":"#f5c6cb",';\n                border-radius: 8px;\n                padding: 12px 20px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                font-weight: 500;\n            ">\n                <span>').concat("success"===t?"✅":"❌"," ").concat(e,'</span>\n                <button type="button" class="btn-close" style="font-size: 14px; margin-left: auto;" data-bs-dismiss="toast"></button>\n            </div>\n        '),document.body.appendChild(s);let a=setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},4e3),r=s.querySelector(".btn-close");null==r||r.addEventListener("click",()=>{clearTimeout(a),s.parentNode&&s.parentNode.removeChild(s)})},w=async t=>{t.preventDefault(),p(""),f(!0);let a=e.trim(),r=s.trim();if(!a){p("Email is required"),b("Email is required","error"),f(!1);return}if(!/\S+@\S+\.\S+/.test(a)){p("Email is invalid"),b("Email is invalid","error"),f(!1);return}if(!r){p("Password is required"),b("Password is required","error"),f(!1);return}try{let e=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:a,password:r})}),t=await e.json();if(e.ok){var n,o;let e=null===(n=t.data)||void 0===n?void 0:n.token,s=null===(o=t.data)||void 0===o?void 0:o.user;if(!e||!s){p("Authentication succeeded but no token/user received."),b("Authentication succeeded but no token/user received.","error"),f(!1);return}localStorage.setItem("token",e),localStorage.setItem("role",s.role),localStorage.setItem("userName",s.name||""),localStorage.setItem("userEmail",a),m?localStorage.setItem("rememberedEmail",a):localStorage.removeItem("rememberedEmail"),b("Login successful! Redirecting to dashboard..."),setTimeout(()=>{switch(s.role){case"general-contractor":g.push("/general-contractor/dashboard");break;case"subcontractor":case"affiliate":g.push("/subscription-list");break;default:g.push("/")}},1e3)}else{let e=t.message||"Invalid email or password";p(e),b(e,"error")}}catch(t){let e="Something went wrong. Please try again.";p(e),b(e,"error"),console.error("Login error:",t)}finally{f(!1)}};return r.useEffect(()=>{let e=localStorage.getItem("rememberedEmail");e&&(t(e),u(!0))},[]),(0,a.jsxs)("section",{className:"hero-sec login login-s1 overflow-hidden position-static",children:[(0,a.jsxs)("div",{className:"image-wrapper",children:[(0,a.jsx)(o.default,{src:"/assets/img/left-image.webp",className:"left-image",alt:"Section Image",width:500,height:800}),(0,a.jsxs)("p",{className:"main-title mb-0",children:["Developed by:",(0,a.jsxs)(n.default,{href:"https://designspartans.com/",target:"_blank",className:"text-primary fw-semibold",children:[" ","Design Spartans"]})]})]}),(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-lg-6 offset-lg-6",children:(0,a.jsx)("div",{className:"content-wrapper d-flex align-items-center justify-content-center",children:(0,a.jsxs)("div",{className:"content mx-auto w-100",children:[(0,a.jsx)(n.default,{href:"/",className:"d-block mb-4",children:(0,a.jsx)(o.default,{src:"/assets/img/icons/logo.webp",width:350,height:100,alt:"Login Logo",style:{maxWidth:"350px"},className:"img-fluid d-block w-100 mx-auto"})}),(0,a.jsx)("div",{className:"fw-semibold fs-2 mb-4 text-center",children:"Login"}),(0,a.jsxs)("form",{className:"form",onSubmit:w,noValidate:!0,children:[(0,a.jsxs)("div",{className:"input-wrapper d-flex flex-column",children:[(0,a.jsxs)("label",{htmlFor:"email",className:"mb-1 fw-semibold",children:["Email Address ",(0,a.jsx)("span",{className:"text-danger",children:"*"})]}),(0,a.jsx)("input",{type:"email",id:"email",placeholder:"hello@example.com",value:e,onChange:e=>t(e.target.value),className:"form-control"})]}),(0,a.jsxs)("div",{className:"input-wrapper d-flex flex-column position-relative",children:[(0,a.jsxs)("label",{htmlFor:"password",className:"mb-1 fw-semibold",children:["Password ",(0,a.jsx)("span",{className:"text-danger",children:"*"})]}),(0,a.jsx)("input",{type:c?"text":"password",id:"password",className:"form-control pe-5",placeholder:"Enter Your Password",value:s,onChange:e=>l(e.target.value)}),(0,a.jsx)("span",{className:"toggle-password position-absolute",style:{right:"10px",top:"38px",cursor:"pointer"},onClick:()=>d(!c),onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),d(!c))},tabIndex:0,role:"button","aria-label":c?"Hide password":"Show password",children:(0,a.jsx)(e=>{let{active:t}=e;return(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"eye-icon ".concat(t?"active":""),children:[(0,a.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"}),(0,a.jsx)("line",{className:"slash",x1:"2",y1:"2",x2:"22",y2:"22",style:{stroke:t?"none":"currentColor"}})]})},{active:c})})]}),(0,a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[(0,a.jsxs)("div",{className:"form-check",children:[(0,a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:m,onChange:e=>u(e.target.checked),id:"rememberMe"}),(0,a.jsx)("label",{className:"form-check-label",htmlFor:"rememberMe",children:"Remember me"})]}),(0,a.jsx)(n.default,{href:"/auth/forget-password",className:"text-decoration-none text-gray-light",children:"Forgot password?"})]}),h&&(0,a.jsx)("p",{className:"text-danger mb-3 animate-slide-up",children:h}),(0,a.jsx)("button",{type:"submit",className:"btn btn-primary rounded-3 w-100 d-block mb-4",disabled:x,children:x?"Please wait...":"Login"})]}),(0,a.jsxs)("div",{className:"text-center fw-medium text-gray-light",children:["Don't have an account?"," ",(0,a.jsx)(n.default,{href:"/auth/register",className:"fw-semibold text-black",children:"Register"})]})]})})})})]})}},98135:function(){}},function(e){e.O(0,[2112,4974,2971,7023,1744],function(){return e(e.s=59029)}),_N_E=e.O()}]);