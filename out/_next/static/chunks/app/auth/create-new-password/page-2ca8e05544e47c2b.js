(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[739],{96920:function(e,s,t){Promise.resolve().then(t.bind(t,16524))},16463:function(e,s,t){"use strict";var a=t(71169);t.o(a,"useParams")&&t.d(s,{useParams:function(){return a.useParams}}),t.o(a,"usePathname")&&t.d(s,{usePathname:function(){return a.usePathname}}),t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}})},16524:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return l}});var a=t(57437),r=t(2265),o=t(66648),n=t(16463);t(98135);var i=t(87138);function l(){let[e,s]=(0,r.useState)(""),[t,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),[m,h]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[x,w]=(0,r.useState)(!1),b=(0,n.useRouter)(),[v,j]=(0,r.useState)(null),[N,y]=(0,r.useState)(null),P=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",t=document.createElement("div");t.innerHTML='\n            <div class="toast show" role="alert" aria-live="assertive" aria-atomic="true" style="\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 9999;\n                min-width: 300px;\n                background-color: '.concat("success"===s?"#d4edda":"#f8d7da",";\n                color: ").concat("success"===s?"#155724":"#721c24",";\n                border: 1px solid ").concat("success"===s?"#c3e6cb":"#f5c6cb",';\n                border-radius: 8px;\n                padding: 12px 20px;\n                box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n                display: flex;\n                align-items: center;\n                gap: 10px;\n                font-weight: 500;\n            ">\n                <span>').concat("success"===s?"✅":"❌"," ").concat(e,'</span>\n                <button type="button" class="btn-close" style="font-size: 14px; margin-left: auto;" data-bs-dismiss="toast"></button>\n            </div>\n        '),document.body.appendChild(t);let a=setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t)},4e3),r=t.querySelector(".btn-close");null==r||r.addEventListener("click",()=>{clearTimeout(a),t.parentNode&&t.parentNode.removeChild(t)})};(0,r.useEffect)(()=>{let e=localStorage.getItem("forgotPasswordEmail"),s=localStorage.getItem("verifiedOtp");j(e),y(s)},[]);let S=async s=>{if(s.preventDefault(),h(""),g(""),!x){if(!e.trim()){P("New Password is required","error");return}if(!t.trim()){P("Confirm Password is required","error");return}if(e!==t){P("Passwords do not match","error");return}if(!v||!N){P("Session expired. Please start again.","error");return}w(!0);try{let s=await fetch("".concat("https://api.ezsubcontractor.com/api/","auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:v,otp:N,new_password:e,password_confirmation:e})}),t=await s.json();if(s.ok)localStorage.removeItem("forgotPasswordEmail"),localStorage.removeItem("verifiedOtp"),P("Password changed successfully!"),setTimeout(()=>{b.push("/auth/login")},1500);else{let e="Failed to reset password. Please try again.";"string"==typeof t.message?e=t.message:Array.isArray(t.message)&&(e=t.message[0]),P(e,"error")}}catch(e){P("Network error. Please check your connection.","error")}finally{w(!1)}}},k=""!==e.trim()&&""!==t.trim()&&e===t,C=e=>{let{open:s}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"3"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("path",{d:"M17.94 17.94A10.94 10.94 0 0 1 12 20c-7 0-11-8-11-8a21.84 21.84 0 0 1 5.06-6.06"}),(0,a.jsx)("path",{d:"M1 1l22 22"})]})})};return(0,a.jsxs)("section",{className:"hero-sec login login-s1 overflow-hidden",children:[(0,a.jsxs)("div",{className:"image-wrapper",children:[(0,a.jsx)(o.default,{src:"/assets/img/left-image.webp",className:"left-image",alt:"Section Image",width:500,height:800}),(0,a.jsxs)("p",{className:"main-title mb-0",children:["Developed by:",(0,a.jsx)(i.default,{href:"https://designspartans.com/",target:"_blank",className:"text-primary fw-semibold",children:" Design Spartans"})]})]}),(0,a.jsx)("div",{className:"row",children:(0,a.jsx)("div",{className:"col-lg-6 offset-lg-6",children:(0,a.jsx)("div",{className:"content-wrapper",children:(0,a.jsxs)("div",{className:"content mx-auto",children:[(0,a.jsx)(o.default,{src:"/assets/img/icons/logo.webp",width:350,height:100,alt:"Login Logo",style:{maxWidth:"350px"},className:"img-fluid d-block w-100 mx-auto mb-4"}),(0,a.jsx)("div",{className:"fw-semibold fs-2 mb-4 text-center form-title",children:"Create New Password"}),(0,a.jsxs)("form",{className:"form",onSubmit:S,children:[(0,a.jsxs)("div",{className:"input-wrapper d-flex flex-column position-relative",children:[(0,a.jsx)("label",{htmlFor:"password",className:"mb-1 fw-semibold",children:"New Password *"}),(0,a.jsx)("input",{type:c?"text":"password",id:"password",className:"form-control pe-5",placeholder:"Enter new password",value:e,onChange:e=>s(e.target.value),disabled:x}),(0,a.jsx)("span",{className:"toggle-password position-absolute",style:{right:10,top:38,cursor:"pointer"},onClick:()=>d(!c),children:(0,a.jsx)(C,{open:c})})]}),(0,a.jsxs)("div",{className:"input-wrapper d-flex flex-column position-relative",children:[(0,a.jsx)("label",{htmlFor:"confirm_password",className:"mb-1 fw-semibold",children:"Confirm Password *"}),(0,a.jsx)("input",{type:u?"text":"password",id:"confirm_password",className:"form-control pe-5",placeholder:"Enter confirm password",value:t,onChange:e=>l(e.target.value),disabled:x}),(0,a.jsx)("span",{className:"toggle-password position-absolute",style:{right:10,top:38,cursor:"pointer"},onClick:()=>p(!u),children:(0,a.jsx)(C,{open:u})})]}),(0,a.jsx)("div",{className:"buttons-wrapper d-flex align-items-center gap-4",children:(0,a.jsx)("button",{type:"submit",className:"btn btn-primary rounded-3 w-100 justify-content-center",disabled:!k||x,style:{opacity:!k||x?.6:1,cursor:!k||x?"not-allowed":"pointer"},children:x?"Changing...":"Change Password"})})]})]})})})})]})}},98135:function(){}},function(e){e.O(0,[2112,4974,2971,7023,1744],function(){return e(e.s=96920)}),_N_E=e.O()}]);